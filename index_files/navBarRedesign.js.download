/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright 2011, Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
/* 
*Below jquery template plugin added to make the .tmpl() to work on the AO pages where the CBOL jfp.combined is not loading and even if loaded tmpl function is having issue
*Making the jquery version check since, when DDL version of jquery loads .tmpl is not working. So this plugin code will load only for ddl applications
*/

/*Loading below jquery ,when version loaded is less than 1.7, Since the onclick events will not work in lower jquery version  */
var $=jQuery.noConflict();
if ((jQuery != null && jQuery.fn.jquery < '1.7') || (jQuery == null && window.location.hostname != null && (window.location.hostname == "transfers.citi.com" || window.location.hostname == "transfersuat.citi.com"))) {
    console.log("jquery loaded internally");
    var headerTag = document.documentElement.getElementsByTagName('HEAD')[0];
    var jscriptTag = document.createElement('script');
    jscriptTag.type = 'text/javascript';
    if ((typeof (cbolURL) != 'undefined' && cbolURL != "")) {
        jscriptTag.src = cbolURL + '/CBOL/portal/layout/js/jquery-combined.min.js';
    } else {
        jscriptTag.src = 'https://online.citi.com/CBOL/portal/layout/js/jquery-combined.min.js';
    }
    headerTag.appendChild(jscriptTag);
}
if (jQuery) {
    console.log("jquery version" + jQuery.fn.jquery);
} else {
    console.log("jquery loaded internally");
}

setTimeout(function () {
    if ((typeof (cbolURL) != 'undefined' && cbolURL != "") || (jQuery.fn.jquery > '1.9') || ((typeof ($.tmpl) == 'undefined'))) {
        (function (i, f) {
            var t = i.fn.domManip, h = "_tmplitem", u = /^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /, p = {}, e = {}, y, x = {
                key: 0,
                data: {}
            }, w = 0, q = 0, g = [];
            function k(B, A, D, E) {
                var C = {
                    data: E || (E === 0 || E === false) ? E : (A ? A.data : {}),
                    _wrap: A ? A._wrap : null,
                    tmpl: null,
                    parent: A || null,
                    nodes: [],
                    calls: c,
                    nest: b,
                    wrap: n,
                    html: r,
                    update: z
                };
                if (B) {
                    i.extend(C, B, {
                        nodes: [],
                        parent: A
                    })
                }
                if (D) {
                    C.tmpl = D;
                    C._ctnt = C._ctnt || C.tmpl(i, C);
                    C.key = ++w;
                    (g.length ? e : p)[w] = C
                }
                return C
            }
            i.each({
                appendTo: "append",
                prependTo: "prepend",
                insertBefore: "before",
                insertAfter: "after",
                replaceAll: "replaceWith"
            }, function (A, B) {
                i.fn[A] = function (C) {
                    var F = [], I = i(C), E, G, D, J, H = this.length === 1 && this[0].parentNode;
                    y = p || {};
                    if (H && H.nodeType === 11 && H.childNodes.length === 1 && I.length === 1) {
                        I[B](this[0]);
                        F = this
                    } else {
                        for (G = 0,
                            D = I.length; G < D; G++) {
                            q = G;
                            E = (G > 0 ? this.clone(true) : this).get();
                            i(I[G])[B](E);
                            F = F.concat(E)
                        }
                        q = 0;
                        F = this.pushStack(F, A, I.selector)
                    }
                    J = y;
                    y = null;
                    i.tmpl.complete(J);
                    return F
                }
            });
            i.fn.extend({
                tmpl: function (C, B, A) {
                    return i.tmpl(this[0], C, B, A)
                },
                tmplItem: function () {
                    return i.tmplItem(this[0])
                },
                template: function (A) {
                    return i.template(A, this[0])
                },
                domManip: function (E, H, G, I) {
                    if (E[0] && i.isArray(E[0])) {
                        var B = i.makeArray(arguments), A = E[0], F = A.length, C = 0, D;
                        while (C < F && !(D = i.data(A[C++], "tmplItem"))) { }
                        if (D && q) {
                            B[2] = function (J) {
                                i.tmpl.afterManip(this, J, G)
                            }
                        }
                        t.apply(this, B)
                    } else {
                        t.apply(this, arguments)
                    }
                    q = 0;
                    if (!y) {
                        i.tmpl.complete(p)
                    }
                    return this
                }
            });
            i.extend({
                tmpl: function (C, F, E, B) {
                    var D, A = !B;
                    if (A) {
                        B = x;
                        C = i.template[C] || i.template(null, C);
                        e = {}
                    } else {
                        if (!C) {
                            C = B.tmpl;
                            p[B.key] = B;
                            B.nodes = [];
                            if (B.wrapped) {
                                s(B, B.wrapped)
                            }
                            return i(m(B, null, B.tmpl(i, B)))
                        }
                    }
                    if (!C) {
                        return []
                    }
                    if (typeof F === "function") {
                        F = F.call(B || {})
                    }
                    if (E && E.wrapped) {
                        s(E, E.wrapped)
                    }
                    D = i.isArray(F) ? i.map(F, function (G) {
                        return G ? k(E, B, C, G) : null
                    }) : [k(E, B, C, F)];
                    return A ? i(m(B, null, D)) : D
                },
                tmplItem: function (B) {
                    var A;
                    if (B instanceof i) {
                        B = B[0]
                    }
                    while (B && B.nodeType === 1 && !(A = i.data(B, "tmplItem")) && (B = B.parentNode)) { }
                    return A || x
                },
                template: function (B, A) {
                    if (A) {
                        if (typeof A === "string") {
                            A = l(A)
                        } else {
                            if (A instanceof i) {
                                A = A[0] || {}
                            }
                        }
                        if (A.nodeType) {
                            A = i.data(A, "tmpl") || i.data(A, "tmpl", l(A.innerHTML))
                        }
                        return typeof B === "string" ? (i.template[B] = A) : A
                    }
                    return B ? (typeof B !== "string" ? i.template(null, B) : (i.template[B] || i.template(null, u.test(B) ? B : i(B)))) : null
                },
                encode: function (A) {
                    return ("" + A).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")
                }
            });
            i.extend(i.tmpl, {
                tag: {
                    tmpl: {
                        _default: {
                            $2: "null"
                        },
                        open: "if($notnull_1){__=__.concat($item.nest($1,$2));}"
                    },
                    wrap: {
                        _default: {
                            $2: "null"
                        },
                        open: "$item.calls(__,$1,$2);__=[];",
                        close: "call=$item.calls();__=call._.concat($item.wrap(call,__));"
                    },
                    each: {
                        _default: {
                            $2: "$index, $value"
                        },
                        open: "if($notnull_1){$.each($1a,function($2){with(this){",
                        close: "}});}"
                    },
                    "if": {
                        open: "if(($notnull_1) && $1a){",
                        close: "}"
                    },
                    "else": {
                        _default: {
                            $1: "true"
                        },
                        open: "}else if(($notnull_1) && $1a){"
                    },
                    html: {
                        open: "if($notnull_1){__.push($1a);}"
                    },
                    "=": {
                        _default: {
                            $1: "$data"
                        },
                        open: "if($notnull_1){__.push($1a);}"
                    },
                    "!": {
                        open: ""
                    }
                },
                complete: function (A) {
                    p = {}
                },
                afterManip: function v(C, A, D) {
                    var B = A.nodeType === 11 ? i.makeArray(A.childNodes) : A.nodeType === 1 ? [A] : [];
                    D.call(C, A);
                    o(B);
                    q++
                }
            });
            function m(A, E, C) {
                var D, B = C ? i.map(C, function (F) {
                    return (typeof F === "string") ? (A.key ? F.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g, "$1 " + h + '="' + A.key + '" $2') : F) : m(F, A, F._ctnt)
                }) : A;
                if (E) {
                    return B
                }
                B = B.join("");
                B.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/, function (G, H, F, I) {
                    D = i(F).get();
                    o(D);
                    if (H) {
                        D = a(H).concat(D)
                    }
                    if (I) {
                        D = D.concat(a(I))
                    }
                });
                return D ? D : a(B)
            }
            function a(B) {
                var A = document.createElement("div");
                A.innerHTML = B;
                return i.makeArray(A.childNodes)
            }
            function l(A) {
                return new Function("jQuery", "$item", "var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('" + i.trim(A).replace(/([\\'])/g, "\\$1").replace(/[\r\t\n]/g, " ").replace(/\$\{([^\}]*)\}/g, "{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g, function (I, C, G, D, E, J, F) {
                    var L = i.tmpl.tag[G], B, H, K;
                    if (!L) {
                        throw "Unknown template tag: " + G
                    }
                    B = L._default || [];
                    if (J && !/\w$/.test(E)) {
                        E += J;
                        J = ""
                    }
                    if (E) {
                        E = j(E);
                        F = F ? ("," + j(F) + ")") : (J ? ")" : "");
                        H = J ? (E.indexOf(".") > -1 ? E + j(J) : ("(" + E + ").call($item" + F)) : E;
                        K = J ? H : "(typeof(" + E + ")==='function'?(" + E + ").call($item):(" + E + "))"
                    } else {
                        K = H = B.$1 || "null"
                    }
                    D = j(D);
                    return "');" + L[C ? "close" : "open"].split("$notnull_1").join(E ? "typeof(" + E + ")!=='undefined' && (" + E + ")!=null" : "true").split("$1a").join(K).split("$1").join(H).split("$2").join(D || B.$2 || "") + "__.push('"
                }) + "');}return __;")
            }
            function s(B, A) {
                B._wrap = m(B, true, i.isArray(A) ? A : [u.test(A) ? A : i(A).html()]).join("")
            }
            function j(A) {
                return A ? A.replace(/\\'/g, "'").replace(/\\\\/g, "\\") : null
            }
            function d(A) {
                var B = document.createElement("div");
                B.appendChild(A.cloneNode(true));
                return B.innerHTML
            }
            function o(G) {
                var I = "_" + q, B, A, E = {}, F, D, C;
                for (F = 0,
                    D = G.length; F < D; F++) {
                    if ((B = G[F]).nodeType !== 1) {
                        continue
                    }
                    A = B.getElementsByTagName("*");
                    for (C = A.length - 1; C >= 0; C--) {
                        H(A[C])
                    }
                    H(B)
                }
                function H(O) {
                    var L, N = O, M, J, K;
                    if ((K = O.getAttribute(h))) {
                        while (N.parentNode && (N = N.parentNode).nodeType === 1 && !(L = N.getAttribute(h))) { }
                        if (L !== K) {
                            N = N.parentNode ? (N.nodeType === 11 ? 0 : (N.getAttribute(h) || 0)) : 0;
                            if (!(J = p[K])) {
                                J = e[K];
                                J = k(J, p[N] || e[N]);
                                J.key = ++w;
                                p[w] = J
                            }
                            if (q) {
                                P(K)
                            }
                        }
                        O.removeAttribute(h)
                    } else {
                        if (q && (J = i.data(O, "tmplItem"))) {
                            P(J.key);
                            p[J.key] = J;
                            N = i.data(O.parentNode, "tmplItem");
                            N = N ? N.key : 0
                        }
                    }
                    if (J) {
                        M = J;
                        while (M && M.key != N) {
                            M.nodes.push(O);
                            M = M.parent
                        }
                        delete J._ctnt;
                        delete J._wrap;
                        i.data(O, "tmplItem", J)
                    }
                    function P(Q) {
                        Q = Q + I;
                        J = E[Q] = (E[Q] || k(J, p[J.parent.key + I] || J.parent))
                    }
                }
            }
            function c(C, A, D, B) {
                if (!C) {
                    return g.pop()
                }
                g.push({
                    _: C,
                    tmpl: A,
                    item: this,
                    data: D,
                    options: B
                })
            }
            function b(A, C, B) {
                return i.tmpl(i.template(A), C, B, this)
            }
            function n(C, A) {
                var B = C.options || {};
                B.wrapped = A;
                return i.tmpl(i.template(C.tmpl), C.data, B, C.item)
            }
            function r(B, C) {
                var A = this._wrap;
                return i.map(i(i.isArray(A) ? A.join("") : A).filter(B || "*"), function (D) {
                    return C ? D.innerText || D.textContent : D.outerHTML || d(D)
                })
            }
            function z() {
                var A = this.nodes;
                i.tmpl(null, null, null, this).insertBefore(A[0]);
                i(A).remove()
            }
        }
        )(jQuery);
    }

    /*Script taken from bootstrap for nava bar since there will be conflict between DDL and Non-DLL pages . Below script can be removed after all pages are in DLL*/
    + function ($) {
        'use strict';

        // DROPDOWN CLASS DEFINITION
        // =========================

        var backdrop = '.dropdown-backdrop'
        var toggle = '[data-toggle="dropdown"]'
        var Dropdown = function (element) {
            $(element).on('click.bs.dropdown', this.toggle)
        }

        Dropdown.VERSION = '3.3.7'

        function getParent($this) {
            var selector = $this.attr('data-target')

            if (!selector) {
                selector = $this.attr('href')
                selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
            }

            var $parent = selector && $(selector)

            return $parent && $parent.length ? $parent : $this.parent()
        }

        function clearMenus(e) {
            if (e && e.which === 3) return
            $(backdrop).remove()
            $(toggle).each(function () {
                var $this = $(this)
                var $parent = getParent($this)
                var relatedTarget = {
                    relatedTarget: this
                }

                if (!$parent.hasClass('open')) return

                if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

                $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

                if (e.isDefaultPrevented()) return

                $this.attr('aria-expanded', 'false')
                 if (viewPortWidth >= 1121) {
                $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
                 }
            })
        }

        Dropdown.prototype.toggle = function (e) {
            var $this = $(this)

            if ($this.is('.disabled, :disabled')) return

            var $parent = getParent($this)
            var isActive = $parent.hasClass('open')

            clearMenus()

            if (!isActive) {
                if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
                    // if mobile we use a backdrop because click events don't delegate
                    $(document.createElement('div'))
                        .addClass('dropdown-backdrop')
                        .insertAfter($(this))
                        .on('click', clearMenus)
                }

                var relatedTarget = {
                    relatedTarget: this
                }
                $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

                if (e.isDefaultPrevented()) return

                $this
                    .trigger('focus')
                    .attr('aria-expanded', 'true')

                $parent
                    .toggleClass('open')
                    .trigger($.Event('shown.bs.dropdown', relatedTarget))
            }

            return false
        }

        Dropdown.prototype.keydown = function (e) {
            if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

            var $this = $(this)

            e.preventDefault()
            e.stopPropagation()

            if ($this.is('.disabled, :disabled')) return

            var $parent = getParent($this)
            var isActive = $parent.hasClass('open')

            if (!isActive && e.which != 27 || isActive && e.which == 27) {
                if (e.which == 27) $parent.find(toggle).trigger('focus')
                return $this.trigger('click')
            }

            var desc = ' li:not(.disabled):visible a'
            var $items = $parent.find('.dropdown-menu' + desc)

            if (!$items.length) return

            var index = $items.index(e.target)

            if (e.which == 38 && index > 0) index-- // up
            if (e.which == 40 && index < $items.length - 1) index++ // down
            if (!~index) index = 0

            $items.eq(index).trigger('focus')
        }


        // DROPDOWN PLUGIN DEFINITION
        // ==========================

        function Plugin(option) {
            return this.each(function () {
                var $this = $(this)
                var data = $this.data('bs.dropdown')

                if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
                if (typeof option == 'string') data[option].call($this)
            })
        }

        var old = $.fn.dropdown

        $.fn.dropdown = Plugin
        $.fn.dropdown.Constructor = Dropdown


        // DROPDOWN NO CONFLICT
        // ====================

        $.fn.dropdown.noConflict = function () {
            $.fn.dropdown = old
            return this
        }


        // APPLY TO STANDARD DROPDOWN ELEMENTS
        // ===================================

        $(document)
            .on('click.bs.dropdown.data-api', clearMenus)
            .on('click.bs.dropdown.data-api', '.dropdown form', function (e) {
                e.stopPropagation()
            })
            .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
            .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
            .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)



    }(jQuery);


    ; (function (root, factory) {
        if (typeof define === "function" && define.amd) {
            define(factory);
        } else if (typeof exports === "object") {
            module.exports = factory();
        } else {
            root.jsonLogic = factory();
        }
    }(this, function () {
        "use strict";
        /* globals console:false */

        if (!Array.isArray) {
            Array.isArray = function (arg) {
                return Object.prototype.toString.call(arg) === "[object Array]";
            };
        }

        /**
         * Return an array that contains no duplicates (original not modified)
         * @param  {array} array   Original reference array
         * @return {array}         New array with no duplicates
         */
        function arrayUnique(array) {
            var a = [];
            for (var i = 0, l = array.length; i < l; i++) {
                if (a.indexOf(array[i]) === -1) {
                    a.push(array[i]);
                }
            }
            return a;
        }

        var jsonLogic = {};
        var operations = {
            "==": function (a, b) {
                return a == b;
            },
            "===": function (a, b) {
                return a === b;
            },
            "!=": function (a, b) {
                return a != b;
            },
            "!==": function (a, b) {
                return a !== b;
            },
            ">": function (a, b) {
                return a > b;
            },
            ">=": function (a, b) {
                return a >= b;
            },
            "<": function (a, b, c) {
                return (c === undefined) ? a < b : (a < b) && (b < c);
            },
            "<=": function (a, b, c) {
                return (c === undefined) ? a <= b : (a <= b) && (b <= c);
            },
            "!!": function (a) {
                return jsonLogic.truthy(a);
            },
            "!": function (a) {
                return !jsonLogic.truthy(a);
            },
            "%": function (a, b) {
                return a % b;
            },
            "log": function (a) {
                console.log(a); return a;
            },
            "in": function (a, b) {
                if (typeof b.indexOf === "undefined") return false;
                return (b.indexOf(a) !== -1);
            },
            "cat": function () {
                return Array.prototype.join.call(arguments, "");
            },
            "+": function () {
                return Array.prototype.reduce.call(arguments, function (a, b) {
                    return parseFloat(a, 10) + parseFloat(b, 10);
                }, 0);
            },
            "*": function () {
                return Array.prototype.reduce.call(arguments, function (a, b) {
                    return parseFloat(a, 10) * parseFloat(b, 10);
                });
            },
            "-": function (a, b) {
                if (b === undefined) {
                    return -a;
                } else {
                    return a - b;
                }
            },
            "/": function (a, b) {
                return a / b;
            },
            "min": function () {
                return Math.min.apply(this, arguments);
            },
            "max": function () {
                return Math.max.apply(this, arguments);
            },
            "merge": function () {
                return Array.prototype.reduce.call(arguments, function (a, b) {
                    return a.concat(b);
                }, []);
            },
            "var": function (a, b) {
                var not_found = (b === undefined) ? null : b;
                var data = this;
                if (typeof a === "undefined" || a === "" || a === null) {
                    return data;
                }
                var sub_props = String(a).split(".");
                for (var i = 0; i < sub_props.length; i++) {
                    if (data === null) {
                        return not_found;
                    }
                    // Descending into data
                    data = data[sub_props[i]];
                    if (data === undefined) {
                        return not_found;
                    }
                }
                return data;
            },
            "missing": function () {
                /*
                Missing can receive many keys as many arguments, like {"missing:[1,2]}
                Missing can also receive *one* argument that is an array of keys,
                which typically happens if it's actually acting on the output of another command
                (like 'if' or 'merge')
                */

                var missing = [];
                var keys = Array.isArray(arguments[0]) ? arguments[0] : arguments;

                for (var i = 0; i < keys.length; i++) {
                    var key = keys[i];
                    var value = jsonLogic.apply({ "var": key }, this);
                    if (value === null || value === "") {
                        missing.push(key);
                    }
                }

                return missing;
            },
            "missing_some": function (need_count, options) {
                // missing_some takes two arguments, how many (minimum) items must be present, and an array of keys (just like 'missing') to check for presence.
                var are_missing = jsonLogic.apply({ "missing": options }, this);

                if (options.length - are_missing.length >= need_count) {
                    return [];
                } else {
                    return are_missing;
                }
            },
            "method": function (obj, method, args) {
                return obj[method].apply(obj, args);
            },

        };

        jsonLogic.is_logic = function (logic) {
            return (
                typeof logic === "object" && // An object
                logic !== null && // but not null
                !Array.isArray(logic) && // and not an array
                Object.keys(logic).length === 1 // with exactly one key
            );
        };

        /*
        This helper will defer to the JsonLogic spec as a tie-breaker when different language interpreters define different behavior for the truthiness of primitives.  E.g., PHP considers empty arrays to be falsy, but Javascript considers them to be truthy. JsonLogic, as an ecosystem, needs one consistent answer.
      
        Spec and rationale here: http://jsonlogic.com/truthy
        */
        jsonLogic.truthy = function (value) {
            if (Array.isArray(value) && value.length === 0) {
                return false;
            }
            return !!value;
        };


        jsonLogic.get_operator = function (logic) {
            return Object.keys(logic)[0];
        };

        jsonLogic.get_values = function (logic) {
            return logic[jsonLogic.get_operator(logic)];
        };

        jsonLogic.apply = function (logic, data) {
            // Does this array contain logic? Only one way to find out.
            if (Array.isArray(logic)) {
                return logic.map(function (l) {
                    return jsonLogic.apply(l, data);
                });
            }
            // You've recursed to a primitive, stop!
            if (!jsonLogic.is_logic(logic)) {
                return logic;
            }

            data = data || {};

            var op = jsonLogic.get_operator(logic);
            var values = logic[op];
            var i;
            var current;

            // easy syntax for unary operators, like {"var" : "x"} instead of strict {"var" : ["x"]}
            if (!Array.isArray(values)) {
                values = [values];
            }

            // 'if', 'and', and 'or' violate the normal rule of depth-first calculating consequents, let each manage recursion as needed.
            if (op === "if" || op == "?:") {
                /* 'if' should be called with a odd number of parameters, 3 or greater
                This works on the pattern:
                if( 0 ){ 1 }else{ 2 };
                if( 0 ){ 1 }else if( 2 ){ 3 }else{ 4 };
                if( 0 ){ 1 }else if( 2 ){ 3 }else if( 4 ){ 5 }else{ 6 };
          
                The implementation is:
                For pairs of values (0,1 then 2,3 then 4,5 etc)
                If the first evaluates truthy, evaluate and return the second
                If the first evaluates falsy, jump to the next pair (e.g, 0,1 to 2,3)
                given one parameter, evaluate and return it. (it's an Else and all the If/ElseIf were false)
                given 0 parameters, return NULL (not great practice, but there was no Else)
                */
                for (i = 0; i < values.length - 1; i += 2) {
                    if (jsonLogic.truthy(jsonLogic.apply(values[i], data))) {
                        return jsonLogic.apply(values[i + 1], data);
                    }
                }
                if (values.length === i + 1) return jsonLogic.apply(values[i], data);
                return null;
            } else if (op === "and") { // Return first falsy, or last
                for (i = 0; i < values.length; i += 1) {
                    current = jsonLogic.apply(values[i], data);
                    if (!jsonLogic.truthy(current)) {
                        return current;
                    }
                }
                return current; // Last
            } else if (op === "or") {// Return first truthy, or last
                for (i = 0; i < values.length; i += 1) {
                    current = jsonLogic.apply(values[i], data);
                    if (jsonLogic.truthy(current)) {
                        return current;
                    }
                }
                return current; // Last
            } else if (op === "all") {
                var scopedData = jsonLogic.apply(values[0], data);
                var scopedLogic = values[1];
                // All of an empty set is false. Note, some and none have correct fallback after the for loop
                if (!scopedData.length) {
                    return false;
                }
                for (i = 0; i < scopedData.length; i += 1) {
                    if (!jsonLogic.truthy(jsonLogic.apply(scopedLogic, scopedData[i]))) {
                        return false; // First falsy, short circuit
                    }
                }
                return true; // All were truthy
            } else if (op === "none") {
                var scopedData = jsonLogic.apply(values[0], data);
                var scopedLogic = values[1];
                for (i = 0; i < scopedData.length; i += 1) {
                    if (jsonLogic.truthy(jsonLogic.apply(scopedLogic, scopedData[i]))) {
                        return false; // First truthy, short circuit
                    }
                }
                return true; // All were falsy
            } else if (op === "some") {
                var scopedData = jsonLogic.apply(values[0], data);
                var scopedLogic = values[1];
                for (i = 0; i < scopedData.length; i += 1) {
                    if (jsonLogic.truthy(jsonLogic.apply(scopedLogic, scopedData[i]))) {
                        return true; // First truthy, short circuit
                    }
                }
                return false; // None were truthy
            }

            // Everyone else gets immediate depth-first recursion
            values = values.map(function (val) {
                return jsonLogic.apply(val, data);
            });


            // The operation is called with "data" bound to its "this" and "values" passed as arguments.
            // Structured commands like % or > can name formal arguments while flexible commands (like missing or merge) can operate on the pseudo-array arguments
            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments
            if (typeof operations[op] === "function") {
                return operations[op].apply(data, values);
            } else if (op.indexOf(".") > 0) { // Contains a dot, and not in the 0th position
                var sub_ops = String(op).split(".");
                var operation = operations;
                for (i = 0; i < sub_ops.length; i++) {
                    // Descending into operations
                    operation = operation[sub_ops[i]];
                    if (operation === undefined) {
                        throw new Error("Unrecognized operation " + op +
                            " (failed at " + sub_ops.slice(0, i + 1).join(".") + ")");
                    }
                }

                return operation.apply(data, values);
            }

            throw new Error("Unrecognized operation " + op);
        };

        jsonLogic.uses_data = function (logic) {
            var collection = [];

            if (jsonLogic.is_logic(logic)) {
                var op = jsonLogic.get_operator(logic);
                var values = logic[op];

                if (!Array.isArray(values)) {
                    values = [values];
                }

                if (op === "var") {
                    // This doesn't cover the case where the arg to var is itself a rule.
                    collection.push(values[0]);
                } else {
                    // Recursion!
                    values.map(function (val) {
                        collection.push.apply(collection, jsonLogic.uses_data(val));
                    });
                }
            }

            return arrayUnique(collection);
        };

        jsonLogic.add_operation = function (name, code) {
            operations[name] = code;
        };

        jsonLogic.rm_operation = function (name) {
            delete operations[name];
        };

        jsonLogic.rule_like = function (rule, pattern) {
            // console.log("Is ". JSON.stringify(rule) . " like " . JSON.stringify(pattern) . "?");
            if (pattern === rule) {
                return true;
            } // TODO : Deep object equivalency?
            if (pattern === "@") {
                return true;
            } // Wildcard!
            if (pattern === "number") {
                return (typeof rule === "number");
            }
            if (pattern === "string") {
                return (typeof rule === "string");
            }
            if (pattern === "array") {
                // !logic test might be superfluous in JavaScript
                return Array.isArray(rule) && !jsonLogic.is_logic(rule);
            }

            if (jsonLogic.is_logic(pattern)) {
                if (jsonLogic.is_logic(rule)) {
                    var pattern_op = jsonLogic.get_operator(pattern);
                    var rule_op = jsonLogic.get_operator(rule);

                    if (pattern_op === "@" || pattern_op === rule_op) {
                        // echo "\nOperators match, go deeper\n";
                        return jsonLogic.rule_like(
                            jsonLogic.get_values(rule, false),
                            jsonLogic.get_values(pattern, false)
                        );
                    }
                }
                return false; // pattern is logic, rule isn't, can't be eq
            }

            if (Array.isArray(pattern)) {
                if (Array.isArray(rule)) {
                    if (pattern.length !== rule.length) {
                        return false;
                    }
                    /*
                      Note, array order MATTERS, because we're using this array test logic to consider arguments, where order can matter. (e.g., + is commutative, but '-' or 'if' or 'var' are NOT)
                    */
                    for (var i = 0; i < pattern.length; i += 1) {
                        // If any fail, we fail
                        if (!jsonLogic.rule_like(rule[i], pattern[i])) {
                            return false;
                        }
                    }
                    return true; // If they *all* passed, we pass
                } else {
                    return false; // Pattern is array, rule isn't
                }
            }

            // Not logic, not array, not a === match for rule.
            return false;
        };

        return jsonLogic;
    }));
    /*Bootstrap Nav bar script ends.*/

    /*Top Nav Application Script */
    var submenuJSON = {
        "en_US": {
            "BANK": {
    "subMenuLinks": [
      {
        "subMenuParentId": "paymentsandTransfers",
         "subMenuLinksList": [
          {
            "paymentsMenuList": [
              {
                "linkName": "Payment Dashboard",
                "linkURL": "/US/ag/paymentHub",
                "show": {"and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              },
              {
                "linkName": "Activity",
                "linkURL": "/US/ag/transhistory/transCommon/list?transactionType=IIT",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "Y"
                                ]
                            }
              }
              ,
              {
                "linkName": "Activity",
                "linkURL": "/US/CBOL/pnt/activity/flow.action",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "N"
                                ]
                            }
              }
              ,
              {
                "linkName": "Pay Bills",
                "linkURL": "/US/jba/mp4/InitializeSubApp.do?TTC=23",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
              },
               {
                "linkName": "Pay Bills",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
                "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
               {
                "linkName": "Pay Bills",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
               	"show": {
                                "==": [
                                    {
                                        "var": "isBusinessCust"
                                    },
                                    "Y"
                                ]
                         }
              }
              ,
              {
                  "linkName": "Manage Payees",
                  "linkURL": "/US/CBOL/pnt/mngpayee/flow.action?jfp.layout=AppBodyAndFAQ",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                }
                ,
                 {
                  "linkName": "Manage Payees",
                  "linkURL": "/US/ag/paymentHub/managePayee?action=billstab",
                 "show": {
                                "==": [
                                    {
                                        "var": "isBusinessCust"
                                    },
                                    "Y"
                                ]
                            }
                },
              {
                "linkName": "Manage Auto Deduct",
                "linkURL": "/US/ag/autoDeduct",
               "show": { "or" : [{ 
                 "if": [{
                   "and": [{
                     "==": [{
                       "var": "autoDeduct"
                     },
                            "Y"
                           ]
                   },
                           {
                             "!=": [{
                               "var": "isPaymentHubEnabled"
                             },
                                    "Y"
                                   ]
                           }
                          ]
                 },
                        true,
                        false
                       ]
               }, {"==": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
            ]
          }
          ,
          {
            "transfersMenuList": [
               {
                  "linkName": "Your Citi Accounts",
                  "linkURL": "/US/jba/mt/InitializeSubApp.do?TTC=7",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                },
                {
                  "linkName": "Your Citi Accounts",
                  "linkURL": "/US/ag/paymentHub/landing?ID=accounts",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"==": [{"var":"isBusinessCust"},"Y"]} ]}, {"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                }
                ,
             {
                "linkName": "Your External Accounts",
                "linkURL": "/US/ag/iitTfr/domestic/input",
               "show": {"and" : [ {"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]}]}
              },
             
              {
                "linkName": "Any Citi Accounts",
                "linkURL": "/US/jba/ic/ICTFR.do",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              },
              {
                "linkName": "Wires & Transfers",
                "linkURL": "/US/ag/paymentHub/landing?ID=payee",
                "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
              {
                "linkName": "Send Money with Zelle<sup>&#174;</sup>",
                "linkURL": "/US/ag/zelle/transfer",
                "show": {"and" : [ { "==": [{ "var": "isZelleEligible" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              },
                {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
            ]
          }
        ]
      }
      ,
      {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Banking Overview",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Checking",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Savings",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "CDs",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "IRAs",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Rates",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Small Business",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
              {
              "linkName": "View All Credit Cards",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
            },
                {
              "linkName": "Rewards",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% Intro APR",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }
            
            
           ]
          },
         {
              "InvestingMenuList":[
			{
              "linkName": "Self-Directed Investing",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Guided Investing",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Working with an Advisor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }
        ]
      },
          
      
        
      {
        "LendingMenuList": [
              	{
              "linkName": "Personal Installment Loan",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": {"and" : [ { "==": [{ "var": "availableFlexLoanOffer" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]} ]} 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {"and" : [ { "==": [{ "var": "viewCitiFlexPayOffer" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]} ]}
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "/US/ag/btlanding",
              "show": {
                    "or": [
                      {
                        "==": [
                          {
                            "var": "btenabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "btstatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTEnabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTStatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                    ]
                  }
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Mortgages",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
           {
              "linkName": "Home Equity",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Promotional Purchase Rate",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
           ]
          },
		     {
              "WealthManagementMenuList":[
                
                {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
			{
              "linkName": "Citigold",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
                 {
              "linkName": "Find a Wealth Team",
              "linkURL": "https://contactcitigold.citi.com/",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }
        ]
      }
              ]
          }
      ,
        
      {
        "subMenuParentId": "services",
        "subMenuLinksList": [
          
           {
            "linkName": "Banking Services",
            "linkURL": "/US/ag/servicing/index?pageName=BankingServices"},
          {
            "linkName": "Statements & Documents",
            "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
          },
          {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
            "show": {"and" : [ { "==": [{ "var": "isFrcEnabled" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
          }
        ]
      }
      ,
      {
        "subMenuParentId": "rewards",
        "subMenuLinksList": [
          {
            "linkName": "ThankYou Rewards",
            "linkURL": "/US/ag/citi-partner-sso/ThankYou",
            "show": {"and" : [ { "==": [{ "var": "isTYEligible" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
          }
          ,
          {
            "linkName": "Offers For You",
            "linkURL": "/US/ag/citioffersforyou",
            "show": {
              "==": [
                {
                  "var": "offerForYouEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ,
          {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "show": {"and" : [ { "!=": [{ "var": "isCDOnly" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
            ,
            "linkTarget": "_blank"
          }
          ,
          {
            "linkName": "Special Offers",
            "linkURL": "/US/JRS/portal/template.do?ID=SpecialOffers",
            "show": {
               "and": [{
                   "==": [{
                     "var": "isSpecialOffersEligible"
                   }, "Y"]
                 }, {
                   "==": [{
                     "var": "isCitiAllianceOnly"
                   }, "N"]
                 },{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]}]
            }
          }
        ]
      }
      , 
        {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explore",
                "linkText": "Here you'll find limited-time offers that'll help you maximize savings, earn reward points, enjoy additional benefits and more."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Credit Cards</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Lending</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banking</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Investing</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
      {
        "subMenuParentId": "profileSettings",
        "subMenuLinksList": [
          {
            "profilesSection": [
              {
                "linkName": "User ID",
                "linkURL": "/US/ag/profile-update/change-userid"
              }
              ,
              {
                "linkName": "Password",
                "linkURL": "/US/ag/profile-update/change-password"
              }
              ,
              {
                "linkName": "Contact Information",
                "linkURL": "/US/ag/ContactInfo/Profiles",
                "show": {"and" : [ { "==": [{ "var": "isCIEligible" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
              {
                "linkName": "Employment Status",
                "linkURL": "/US/ag/kyc/data-capture/index/category/employmentInformation",
                "show": {"and" : [ { "!=": [{ "var": "isPilOnly" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]} 
              }
              ,
              {
                "linkName": "Income Information",
                "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                "show": {
                  "and": [{
                    "==": [{
                      "var": "isIncomeInformationEligible" }
                           , "Y" ] }
                          , {
                            "==": [  {
                              "var": "isCDOnly" }
                                   , "Y" ] },{"!=": [{"var":"isBrokerageOnly"},"Y"]}
                         ] }
              }
              ,
              {
                "linkName": "Balance & Benefits",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
              }
              ,
              {
                "linkName": "Relationship Tier",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
              }
            ]
          }
          ,
          {
            "settingsSection": [
              {
                "linkName": "Account Alerts",
                "linkURL": "/US/ag/alerts",
                "show": { "and" : [{ "or": [{ "==": [{ "var": "isManageAlerts"	}, "Y" ]}, { "==": [{ "var": "isEnrollAlerts" }, "Y" ]} ]}, {"!=": [{"var":"isPilOnly"},"Y"]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]} ]}
              }
              ,
              {
                "linkName": "<span class=\"settingsIcon\"></span>More Settings",
                "linkURL": "/US/ag/servicing/index?pageName=Settings"
              }
            ]
          }
        ]
      }
    ]
  }
  ,
    "SPF": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
           "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Pay Citi Credit Cards",
                  "linkURL": "/US/ag/payments/crecarpay/input"
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
                {
                  "linkName": "Balance Transfers",
                  "linkURL": "/US/ag/btlanding",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
              ]
            }
          ]
        }
        ,
		{
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Banking Overview",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Checking",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Savings",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "CDs",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "IRAs",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Rates",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Small Business",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
              ]
          }
          ,
          {
            "CreditCardMenuList": [
              {
              "linkName": "View All Credit Cards",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
                {
              "linkName": "Rewards",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "0% Intro APR",
             "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            }
            
            
        ]
      },
           {
              "InvestingMenuList":[
            {
              "linkName": "Self-Directed Investing",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": true
            },
            {
              "linkName": "Guided Investing",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show": true
            },
            {
              "linkName": "Working with an Advisor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": true
            }
        ]
      },
          
      
          
      {
        "LendingMenuList": [
              	{
              "linkName": "Personal Installment Loan",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  	"show": { "and" : [ { "==": [{ "var": "availableFlexLoanOffer" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]} 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "/US/ag/btlanding",
               "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Mortgages",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
          	{
              "linkName": "Home Equity",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Promotional Purchase Rate Offer",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
          ]
          },
		   {
              "WealthManagementMenuList":[
                   {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                     "show": true
            },
			{
              "linkName": "Citigold",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": true
            },
                
                 {
              "linkName": "Find a Wealth Team",
              "linkURL": "https://contactcitigold.citi.com/",
               "show": true
            }
             
        ]
      }
              ]
          }
      ,
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            {
              "linkName": "Credit Card Services",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Travel Services",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Statements & Documents",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
            "show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL": "/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Custom Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/sso/index?tenantId=ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Offers for You",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Card Benefits",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder&cid=AFC~01~140601~CBOL~AcctMgmt~Header"
            }
          ]
        }
        ,
         {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explore",
                "linkText": "Here you'll find limited-time offers that'll help you maximize savings, earn reward points, enjoy additional benefits and more."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Credit Cards</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Lending</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banking</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Investing</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "User ID",
                  "linkURL": "/US/ag/profile-update/change-userid",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
                }
                ,
                {
                  "linkName": "Password",
                  "linkURL": "/US/ag/profile-update/change-password",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
                }
                ,
                {
                  "linkName": "Contact Information",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                  "show": { "and" : [ { "==": [{ "var": "isCIEligible" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
                ,
                {
                  "linkName": "Income Information",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Balance & Benefits",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Relationship Tier",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Account Alerts",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>More Settings",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
  ,
    "MRC": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
           "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Payment Dashboard",
                  "linkURL": "/US/ag/paymentHub",
                  "show": {
                    "==": [{
                      "var": "isPaymentHubEnabled"
                    },
                           "Y"
                          ]
                  }
                },
                {
                  "linkName": "Activity",
                  "linkURL": "/US/CBOL/pnt/activity/flow.action",
                  "show": { "and" : [ { "!=": [{ "var": "isCardBrokerage" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"N"]} ]}
                },
                {
                "linkName": "Activity",
                "linkURL": "/US/ag/transhistory/transCommon/list?transactionType=IIT",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "Y"
                                ]
                            }
              }
             
                ,
                {
                "linkName": "Pay Bills",
                "linkURL": "/US/jba/mp4/InitializeSubApp.do?TTC=23",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]}, {"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
              },
               {
                "linkName": "Pay Bills",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
                "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
              }
              ,
               {
                "linkName": "Pay Bills",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
               "show": { "and" : [ { "==": [{ "var": "isBusinessCust" }, "Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
              }
              ,
                {
                  "linkName": "Pay Citi Credit Cards",
                  "linkURL": "/US/ag/payments/crecarpay/input"                  
                },                
                {
                  "linkName": "Manage Payees",
                  "linkURL": "/US/CBOL/pnt/mngpayee/flow.action?jfp.layout=AppBodyAndFAQ",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                }
                ,
                 {
                  "linkName": "Manage Payees",
                  "linkURL": "/US/ag/paymentHub/managePayee?action=billstab",
                "show": { "and" : [ { "==": [{ "var": "isBusinessCust" }, "Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                }
                ,
                {
                  "linkName": "Manage Auto Deduct",
                  "linkURL": "/US/ag/autoDeduct",
                 "show": {
                   "if": [{
                     "and": [{
                       "==": [{
                         "var": "autoDeduct"
                       },
                              "Y"
                             ]
                     },
                             {
                               "!=": [{
                                 "var": "isPaymentHubEnabled"
                               },
                                      "Y"
                                     ]
                             }
                            ]
                   },
                          true,
                          false
                         ]
                 }
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
                {
                  "linkName": "Your Citi Accounts",
                  "linkURL": "/US/jba/mt/InitializeSubApp.do?TTC=7",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]}, {"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                },
                {
                  "linkName": "Your Citi Accounts",
                  "linkURL": "/US/ag/paymentHub/landing?ID=accounts",
                 "show": { "and" : [{ "or" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"==": [{"var":"isBusinessCust"},"Y"]} ]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                }
                ,
                 {
                  "linkName": "Your External Accounts",
                  "linkURL": "/US/JRS/iit/InitProcessing.do?ID=CETransferAccounts",
                  "show": {
                    "==": [
                      { "var": "isBusinessCust" }, "N"]}
                },
                
                
                {
                  "linkName": "Any Citi Accounts",
                  "linkURL": "/US/jba/ic/ICTFR.do",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                },
                 {
                  "linkName": "Wires & Transfers",
                  "linkURL": "/US/ag/paymentHub/landing?ID=payee",
                  "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
                },
                {
                  "linkName": "Balance Transfers",
                  "linkURL": "/US/ag/btlanding",
                 "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
                ,
                {
                  "linkName": "Send Money with Zelle<sup>&#174;</sup>",
                  "linkURL": "/US/ag/zelle/transfer",
                  "show": {
                    "==": [
                      {
                        "var": "isZelleEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                },
                {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
              ]
            }
          ]
        }
        ,
       {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Banking Overview",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Checking",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Savings",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "CDs",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "IRAs",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Rates",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Small Business",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
              {
              "linkName": "View All Credit Cards",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
                
            },
                {
              "linkName": "Rewards",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% Intro APR",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }
            
            
           ]
          },
         {
              "InvestingMenuList":[
			{
              "linkName": "Self-Directed Investing",
              "linkURL": "/US/ag/citi-self-invest",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Guided Investing",
              "linkURL": "/US/ag/cwb?entry=topnav",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Working with an Advisor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }
        ]
      },
          
      
        
      {
        "LendingMenuList": [
              	{
              "linkName": "Personal Installment Loan",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": {
                  "==": [{
                    "var": "availableFlexLoanOffer"
                  },
                         "Y"
                        ]
                } 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "/US/ag/btlanding",
              "show": {
                    "or": [
                      {
                        "==": [
                          {
                            "var": "btenabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "btstatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTEnabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTStatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                    ]
                  }
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Mortgages",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
           {
              "linkName": "Home Equity",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Promotional Purchase Rate",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
           ]
          },
		     {
              "WealthManagementMenuList":[
                
                {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
			{
              "linkName": "Citigold",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
                {
                "linkName": "Find a Wealth Team",
              "linkURL": "https://contactcitigold.citi.com/",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
                }
        ]
      }
              ]
          }
      ,
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            
           {
            "linkName": "Banking Services",
            "linkURL": "/US/ag/servicing/index?pageName=BankingServices"
           },
            {
              "linkName": "Credit Card Services",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Travel Services",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Statements & Documents",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
            "show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL": "/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Custom Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/citi-partner-sso/ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Offers for You",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Card Benefits",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder&cid=AFC~01~140601~CBOL~AcctMgmt~Header"
            }
          ]
        }
        ,
         {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explore",
                "linkText": "Here you'll find limited-time offers that'll help you maximize savings, earn reward points, enjoy additional benefits and more."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Credit Cards</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Lending</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banking</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Investing</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "User ID",
                  "linkURL": "/US/ag/profile-update/change-userid"
                }
                ,
                {
                  "linkName": "Password",
                  "linkURL": "/US/ag/profile-update/change-password"
                }
                ,
                {
                  "linkName": "Contact Information",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                  "show": {
                    "==": [
                      {
                        "var": "isCIEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                  "linkName": "Employment Status",
                  "linkURL": "/US/ag/kyc/data-capture/index/category/employmentInformation"
                }
                ,
                {
                  "linkName": "Income Information",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Balance & Benefits",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Relationship Tier",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Account Alerts",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>More Settings",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
  ,
    "CARDSAndPIL": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
          "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Pay Citi Credit Cards",
                  "linkURL": "/US/CBOL/pnt/crecarpay/flow.action"
                }
                ,
                {
                  "linkName": "Manage Auto Deduct",
                  "linkURL": "/US/ag/autoDeduct",
                  "show": {
                    "==": [{
                      "var": "autoDeduct" }
                           ,"Y"]}
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
                {
                  "linkName": "Your External Accounts",
                  "linkURL": "/US/JRS/iit/InitProcessing.do?ID=CETransferAccounts",
                 
                  "show": { "==": [{ "var": "isBusinessCust" }, "N"]}
                },
                
                 
                {
                  "linkName": "Balance Transfers",
                  "linkURL": "/US/ag/btlanding",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                },
                {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
              ]
            }
          ]
        }
        ,
		{
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Banking Overview",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Checking",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Savings",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "CDs",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "IRAs",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Rates",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Small Business",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
               {
              "linkName": "View All Credit Cards",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
            },
                {
              "linkName": "Rewards",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% Intro APR",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Balance Transfer",
             "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }
            
           
        ]
      },
          {
              "InvestingMenuList":[
            {
              "linkName": "Self-Directed Investing",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": true
            },    
			{
              "linkName": "Inversin Guiada",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show":true
            },
            {
              "linkName": "Working with an Advisor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": true
            }
        ]
      },
          
      
         
      {
        "LendingMenuList": [
              	{
              "linkName": "Personal Installment Loan",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": { "and" : [ { "==": [{ "var": "availableFlexLoanOffer" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]} 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Balance Transfer",
              "linkURL": "/US/ag/btlanding",
             "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Mortgages",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
            {
              "linkName": "Home Equity",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Promotional Purchase Rate Offer",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Small Business",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
          ]
          },
		    {
              "WealthManagementMenuList":[
                   {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                     "show": true
            },
			{
              "linkName": "Citigold",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": true
            },
                 {
                "linkName": "Find a Wealth Team",
              "linkURL": "https://contactcitigold.citi.com/",
              "show": true
                }
             
        ]
      }
              ]
          }
      ,
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            
           {
            "linkName": "Banking Services",
            "linkURL": "/US/ag/servicing/index?pageName=BankingServices"
           },
            {
              "linkName": "Credit Card Services",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Travel Services",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Statements & Documents",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
            "show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL": "/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Custom Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/citi-partner-sso/ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Offers for You",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Card Benefits",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder"
            }
          ]
        }
        ,
         {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explore",
                "linkText": "Here you'll find limited-time offers that'll help you maximize savings, earn reward points, enjoy additional benefits and more."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Credit Cards</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Lending</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banking</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Investing</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "User ID",
                  "linkURL": "/US/ag/profile-update/change-userid"
                }
                ,
                {
                  "linkName": "Password",
                  "linkURL": "/US/ag/profile-update/change-password"
                }
                ,
                {
                  "linkName": "Contact Information",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                  "show": {
                    "==": [
                      {
                        "var": "isCIEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                  "linkName": "Income Information",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Balance & Benefits",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Relationship Tier",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Account Alerts",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>More Settings",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
},
        "es_US": {
            "BANK": {
    "subMenuLinks": [
      {
        "subMenuParentId": "paymentsandTransfers",
        "subMenuLinksList": [
          {
            "paymentsMenuList": [
              {
                "linkName": "Pantalla de Pagos",
                "linkURL": "/US/ag/paymentHub",
                "show": {"and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              },
              {
                "linkName": "Actividad",
                "linkURL": "/US/CBOL/pnt/activity/flow.action",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "N"
                                ]
                            }
              }
              ,
              {
                "linkName": "Actividad",
                "linkURL": "/US/ag/transhistory/transCommon/list?transactionType=IIT",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "Y"
                                ]
                            }
              },
              {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/jba/mp4/InitializeSubApp.do?TTC=23",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
              },
               {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
                "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
               {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
               	"show": {
                                "==": [
                                    {
                                        "var": "isBusinessCust"
                                    },
                                    "Y"
                                ]
                            }
              }
              ,              
               {
                  "linkName": "Administrar Beneficiarios",
                  "linkURL": "/US/CBOL/pnt/mngpayee/flow.action?jfp.layout=AppBodyAndFAQ",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                }
                ,
                 {
                  "linkName": "Administrar Beneficiarios",
                  "linkURL": "/US/ag/paymentHub/managePayee?action=billstab",
                 "show": {
                                "==": [
                                    {
                                        "var": "isBusinessCust"
                                    },
                                    "Y"
                                ]
                            }
                },
              {
                "linkName": "Administrar Auto Deduct",
                "linkURL": "/US/ag/autoDeduct",
                "show": { "or" : [{ 
                 "if": [{
                   "and": [{
                     "==": [{
                       "var": "autoDeduct"
                     },
                            "Y"
                           ]
                   },
                           {
                             "!=": [{
                               "var": "isPaymentHubEnabled"
                             },
                                    "Y"
                                   ]
                           }
                          ]
                 },
                        true,
                        false
                       ]
               }, {"==": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
            ]
          }
          ,
          {
            "transfersMenuList": [
              {
                  "linkName": "Tus Cuentas Citi",
                  "linkURL": "/US/jba/mt/InitializeSubApp.do?TTC=7",
                 "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                },
                {
                  "linkName": "Tus Cuentas Citi",
                  "linkURL": "/US/ag/paymentHub/landing?ID=accounts",
                 "show": { "and" : [{ "or" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"==": [{"var":"isBusinessCust"},"Y"]} ]}, {"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
                }
                ,             
             {
                "linkName": "Tus Cuentas Externas ",
                "linkURL": "/US/ag/iitTfr/domestic/input",
                "show": {"and" : [ {"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]}]}
              },
               
              {
                "linkName": "Cualquier Cuenta de Citi",
                "linkURL": "/US/jba/ic/ICTFR.do",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]} ]}
              },
              {
                "linkName": "Transferencias Cablegrficas y de Otro Tipo",
                "linkURL": "/US/ag/paymentHub/landing?ID=payee",
                "show": {"and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
              {
                "linkName": "Enviar Dinero con Zelle<sup>&#174;</sup>",
                "linkURL": "/US/ag/zelle/transfer",
                "show": {"and" : [ { "==": [{ "var": "isZelleEligible" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              },
               {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
            ]
          }
        ]
      }
      ,
       {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Descripcin General de Servicios Bancarios",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Cuentas de Cheques",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Cuentas de Ahorros",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "Certificados de Depsito (CD)",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "Cuentas de Retiro Individual (IRA)",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Tasas",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Pequeas Empresas",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
               {
              "linkName": "Ver Todas las Tarjetas de Crdito",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
            },
                {
              "linkName": "Recompensas",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% APR Inicial",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }

        ]
      },
          {
              "InvestingMenuList":[
			{
              "linkName": "Inversin Autodirigida",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }, 
            {
              "linkName": "Inversin Guiada",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Trabajando con un Asesor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }
        ]
      },
          
      
      {
        "LendingMenuList": [
              	{
              "linkName": "Prstamo Personal a Plazos",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": {"and" : [ { "==": [{ "var": "availableFlexLoanOffer" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]} ]} 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			  "show": {"and" : [ { "==": [{ "var": "viewCitiFlexPayOffer" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]} ]}
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "/US/ag/btlanding",
              "show": {
                    "or": [
                      {
                        "==": [
                          {
                            "var": "btenabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "btstatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTEnabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTStatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                    ]
                  }
            },
            {
              "linkName": "Aumento de Lnea de Crdito",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Hipoteca",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
            {
              "linkName": "Garanta Hipotecaria",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Tasa Promocional para Compras",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
            ]
          },
		  
           {
              "WealthManagementMenuList":[
                 {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                   "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
			{
              "linkName": "Citigold<sup class='bsup'>&reg;</sup>",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
                 {
              "linkName": "Buscar un Equipo de Gestin de Patrimonios",
              "linkURL": "https://contactcitigold.citi.com/",
                   "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }
               
        ]
      }
              ]
          },
      {
        "subMenuParentId": "services",
        "subMenuLinksList": [
          {
            "linkName": "Servicios Bancarios",
            "linkURL": "/US/ag/servicing/index?pageName=BankingServices"
          }
          ,
          {
            "linkName": "Estados de Cuenta y Documentos",
            "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
          },
          {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
             "show": {"and" : [ { "==": [{ "var": "isFrcEnabled" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
          }
        ]
      }
      ,
      {
        "subMenuParentId": "rewards",
        "subMenuLinksList": [
          {
            "linkName": "ThankYou Rewards",
            "linkURL": "/US/ag/citi-partner-sso/ThankYou",
            "show": {"and" : [ { "==": [{ "var": "isTYEligible" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
          }
          ,
          {
            "linkName": "Ofertas Para Ti",
            "linkURL": "/US/ag/citioffersforyou",
            "show": {
              "==": [
                {
                  "var": "offerForYouEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ,
          {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "show": {"and" : [ { "!=": [{ "var": "isCDOnly" }, "Y"]},{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
            ,
            "linkTarget": "_blank"
          }
          ,
          {
            "linkName": "Ofertas Para Ti",
            "linkURL": "/US/JRS/portal/template.do?ID=SpecialOffers",
            "show": {
              "and": [{
                   "==": [{
                     "var": "isSpecialOffersEligible"
                   }, "Y"]
                 }, {
                   "==": [{
                     "var": "isCitiAllianceOnly"
                   }, "N"]
                 },{"!=": [{"var":"isPilOnly"},"Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]}]
            }
          }
        ]
      },
      
      {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explora",
                "linkText": "Aqu encontrars ofertas de tiempo limitado que te ayudarn a maximizar tus ahorros, ganar puntos de recompensa, disfrutar de beneficios adicionales y ms."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Tarjeta de Crdito</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Prstamos</span>",
                
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banca Personal</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Inversin</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
      {
        "subMenuParentId": "profileSettings",
        "subMenuLinksList": [
          {
            "profilesSection": [
              {
                "linkName": "Identificacin de Usuario",
                "linkURL": "/US/ag/profile-update/change-userid"
              }
              ,
              {
                "linkName": "Contrasea",
                "linkURL": "/US/ag/profile-update/change-password"
              }
              ,
              {
                "linkName": "Informacin de Contacto",
                "linkURL": "/US/ag/ContactInfo/Profiles",
                "show": {"and" : [ { "==": [{ "var": "isCIEligible" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
              {
                "linkName": "Situacin Laboral",
                "linkURL": "/US/ag/kyc/data-capture/index/category/employmentInformation",
                "show": {"and" : [ { "!=": [{ "var": "isPilOnly" }, "Y"]},{"!=": [{"var":"isBrokerageOnly"},"Y"]} ]}
              }
              ,
              {
                "linkName": "Informacin sobre Ingresos",
                "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                "show": {
                  "and": [{
                    "==": [{
                      "var": "isIncomeInformationEligible" }
                           , "Y" ] }
                          , {
                            "==": [  {
                              "var": "isCDOnly" }
                                   , "Y" ] },{"!=": [{"var":"isBrokerageOnly"},"Y"]}
                         ] }
              }
              ,
              {
                "linkName": "Saldo y Beneficios",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
              }
              ,
              {
                "linkName": "Categora de Relacin",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
              }
            ]
          }
          ,
          {
            "settingsSection": [
              {
                "linkName": "Alertas de Cuenta",
                "linkURL": "/US/ag/alerts",
                "show": { "and" : [{ "or": [{ "==": [{ "var": "isManageAlerts"	}, "Y" ]}, { "==": [{ "var": "isEnrollAlerts" }, "Y" ]} ]}, {"!=": [{"var":"isPilOnly"},"Y"]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]} ]}
              }
              ,
              {
                "linkName": "<span class=\"settingsIcon\"></span>Ms Configuraciones",
                "linkURL": "/US/ag/servicing/index?pageName=Settings"
              }
            ]
          }
        ]
      }
    ]
  }
  ,
    "SPF": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
          "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Pagar Tarjetas de Crdito Citi",
                  "linkURL": "/US/ag/payments/crecarpay/input"
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
                {
                  "linkName": "Transferencia de Saldo",
                  "linkURL": "/US/ag/btlanding",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
              ]
            }
          ]
        }
        ,
         {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Descripcin General de Servicios Bancarios",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Cuentas de Cheques",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Cuentas de Ahorros",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "Certificados de Depsito (CD)",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "Cuentas de Retiro Individual (IRA)",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Tasas",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Pequeas Empresas",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
              {
              "linkName": "Ver Todas las Tarjetas de Crdito",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
                {
              "linkName": "Recompensas",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "0% APR Inicial",
             "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            },
            {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus",
              "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
            }
            
            
        ]
      },
           {
              "InvestingMenuList":[
			{
              "linkName": "Inversin Autodirigida",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": true
            },
                {
              "linkName": "Inversin Guiada",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show": true
            },
                {
              "linkName": "Trabajando con un Asesor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": true
            }
        ]
      },
          
      
      {
        "LendingMenuList": [
              	{
              "linkName": "Prstamos Personales",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": { "and" : [ { "==": [{ "var": "availableFlexLoanOffer" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "/US/ag/btlanding",
              "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Hipoteca",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
            {
              "linkName": "Garanta Hipotecaria",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Tasa Promocional para Compras",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
          ]
          },
		  
           {
              "WealthManagementMenuList":[
                
                {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                  "show": true
            },
			{
              "linkName": "Citigold<sup class='bsup'>&reg;</sup>",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": true
            },
                  {
              "linkName": "Buscar un Equipo de Gestin de Patrimonios",
              "linkURL": "https://contactcitigold.citi.com/",
                    "show": true
                  }
        ]
      }
              ]
          },
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            {
              "linkName": "Servicios de Tarjeta de Crdito",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Servicios de Viaje",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Estados de Cuenta y Documentos",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
              	"show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
		  }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Recompensas de Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL": "/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Recompensas Cash Rewards Personalizadas",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/sso/index?tenantId=ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Ofertas para Ti",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Beneficios de la Tarjeta",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder&cid=AFC~01~140601~CBOL~AcctMgmt~Header"
            }
          ]
        }
        ,
        {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explora",
                "linkText": "Aqu encontrars ofertas de tiempo limitado que te ayudarn a maximizar tus ahorros, ganar puntos de recompensa, disfrutar de beneficios adicionales y ms."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Tarjeta de Crdito</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Prstamos</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banca Personal</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Inversin</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "Identificacin de Usuario",
                  "linkURL": "/US/ag/profile-update/change-userid",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
                }
                ,
                {
                  "linkName": "Contrasea",
                  "linkURL": "/US/ag/profile-update/change-password",
                  "show": {"!=": [{"var": "isPglLiteMode"},"Y"]}
                }
                ,
                {
                  "linkName": "Informacin de Contacto",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                 "show": { "and" : [ { "==": [{ "var": "isCIEligible" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
                ,
                {
                  "linkName": "Informacin sobre Ingresos",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Saldo y Beneficios",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Categora de Relacin",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Alertas de Cuenta",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>Ms Configuraciones",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
  ,
    "MRC": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
          "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Pantalla de Pagos",
                  "linkURL": "/US/ag/paymentHub",
                  "show": {
                    "==": [{
                      "var": "isPaymentHubEnabled"
                    },
                           "Y"
                          ]
                  }
                },
                {
                  "linkName": "Actividad",
                  "linkURL": "/US/CBOL/pnt/activity/flow.action",
                   "show": { "and" : [ { "!=": [{ "var": "isCardBrokerage" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"N"]} ]}
                },
                {
                "linkName": "Activity",
                "linkURL": "/US/ag/transhistory/transCommon/list?transactionType=IIT",
                "show": {
                                "==": [
                                    {
                                        "var": "isOnlyCZ4"
                                    },
                                    "Y"
                                ]
                            }
              }
                ,
                {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/jba/mp4/InitializeSubApp.do?TTC=23",
                "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]}, {"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
              },
               {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
                "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
              }
              ,
               {
                "linkName": "Pagar Facturas",
                "linkURL": "/US/ag/paymentHub/upcomingAndAllBillPayees",
               	"show": { "and" : [ { "==": [{ "var": "isBusinessCust" }, "Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
              }
              ,
                {
                  "linkName": "Pagar Tarjetas de Crdito Citi",
                  "linkURL": "/US/ag/payments/crecarpay/input"                 
                },                
                {
                  "linkName": "Administrar Beneficiarios",
                  "linkURL": "/US/CBOL/pnt/mngpayee/flow.action?jfp.layout=AppBodyAndFAQ",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                }
                ,
                 {
                  "linkName": "Administrar Beneficiarios",
                  "linkURL": "/US/ag/paymentHub/managePayee?action=billstab",
                "show": { "and" : [ { "==": [{ "var": "isBusinessCust" }, "Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                },               
                {
                  "linkName": "Administrar Auto Deduct",
                  "linkURL": "/US/ag/autoDeduct",
                  "show": {
                   "if": [{
                     "and": [{
                       "==": [{
                         "var": "autoDeduct"
                       },
                              "Y"
                             ]
                     },
                             {
                               "!=": [{
                                 "var": "isPaymentHubEnabled"
                               },
                                      "Y"
                                     ]
                             }
                            ]
                   },
                          true,
                          false
                         ]
                 }
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
               {
                  "linkName": "Tus Cuentas Citi",
                  "linkURL": "/US/jba/mt/InitializeSubApp.do?TTC=7",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]}, {"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                },
                {
                  "linkName": "Tus Cuentas Citi",
                  "linkURL": "/US/ag/paymentHub/landing?ID=accounts",
                 "show": { "and" : [{ "or" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"==": [{"var":"isBusinessCust"},"Y"]} ]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                }
                ,
                {
                  "linkName": "Tus Cuentas Externas ",
                  "linkURL": "/US/JRS/iit/InitProcessing.do?ID=CETransferAccounts",
                  "show": {
                                "==": [
                                    {
                                        "var": "isBusinessCust"
                                    },
                                    "N"
                                ]
                            }
                }
                ,
                
                {
                  "linkName": "Transferencias Cablegrficas y de Otro Tipo",
                  "linkURL": "/US/jba/ic/ICTFR.do",
                  "show": { "and" : [ { "!=": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]},{"!=": [{"var":"isCardBrokerage"},"Y"]} ]}
                },
                {
                  "linkName": "Transferencias Cablegrficas y de Otro Tipo",
                  "linkURL": "/US/ag/paymentHub/landing?ID=payee",
                  "show": { "and" : [ { "==": [{ "var": "isPaymentHubEnabled" }, "Y"]},{"!=": [{"var":"isBusinessCust"},"Y"]} ]}
                }
                ,
                {
                  "linkName": "Transferencia de Saldo",
                  "linkURL": "/US/ag/btlanding",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                }
                ,
                {
                  "linkName": "Enviar con Zelle<sup>&#174;</sup>",
                  "linkURL": "/US/ag/zelle/transfer",
                  "show": {
                    "==": [
                      {
                        "var": "isZelleEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                },
                 {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
              ]
            }
          ]
        }
        ,
         {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Descripcin General de Servicios Bancarios",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Cuentas de Cheques",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Cuentas de Ahorros",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "Certificados de Depsito (CD)",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "Cuentas de Retiro Individual (IRA)",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Tasas",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Pequeas Empresas",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
               {
              "linkName": "Ver Todas las Tarjetas de Crdito",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
            },
                {
              "linkName": "Recompensas",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% APR Inicial",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }
        ]
      },
          {
              "InvestingMenuList":[
			{
              "linkName": "Inversin Autodirigida",
              "linkURL": "/US/ag/citi-self-invest",
                "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Inversin Guiada",
              "linkURL": "/US/ag/cwb?entry=topnav",
                "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
            {
              "linkName": "Trabajando con un Asesor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            }    
        ]
      },
          
      
      {
        "LendingMenuList": [
              	{
              "linkName": "Prstamo Personal a Plazos",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": {
                  "==": [{
                    "var": "availableFlexLoanOffer"
                  },
                         "Y"
                        ]
                } 
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "/US/ag/btlanding",
              "show": {
                    "or": [
                      {
                        "==": [
                          {
                            "var": "btenabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "btstatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTEnabled"
                          }
                          ,
                          "Y"
                        ]
                      }
                      ,
                      {
                        "==": [
                          {
                            "var": "BTStatus"
                          }
                          ,
                          "Y"
                        ]
                      }
                    ]
                  }
            },
            {
              "linkName": "Aumento de Lnea de Crdito",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Hipoteca",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
            {
              "linkName": "Garanta Hipotecaria",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Tasa Promocional para Compras",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
           ]
          },
		  
           {
              "WealthManagementMenuList":[
                 {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
			{
              "linkName": "Citigold<sup class='bsup'>&reg;</sup>",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
               "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
            },
                  {
              "linkName": "Buscar un Equipo de Gestin de Patrimonios",
              "linkURL": "https://contactcitigold.citi.com/",
                "show": {
                  "==": [{
                    "var": "isCitiAllianceOnly"
                  },
                         "N"
                        ]
                }
                  }
               
        ]
      }
              ]
          },
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            {
              "linkName": "Servicios Bancarios",
              "linkURL": "/US/ag/servicing/index?pageName=BankingServices"
            }
            ,
            {
              "linkName": "Servicios de Tarjeta de Crdito",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Servicios de Viaje",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Estados de Cuenta y Documentos ",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
               "show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Recompensas de Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL":"/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Recompensas Cash Rewards Personalizadas",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/citi-partner-sso/ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Ofertas para Ti",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Beneficios de la Tarjeta",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder&cid=AFC~01~140601 ~CBOL~AcctMgmt~Header"
            }
          ]
        }
        ,
        {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explora",
                "linkText": "Aqu encontrars ofertas de tiempo limitado que te ayudarn a maximizar tus ahorros, ganar puntos de recompensa, disfrutar de beneficios adicionales y ms."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Tarjeta de Crdito</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Prstamos</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banca Personal</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Inversin</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "Identificacin de Usuario",
                  "linkURL": "/US/ag/profile-update/change-userid"
                }
                ,
                {
                  "linkName": "Contrasea",
                  "linkURL": "/US/ag/profile-update/change-password"
                }
                ,
                {
                  "linkName": "Informacin de Contacto",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                  "show": {
                    "==": [
                      {
                        "var": "isCIEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                  "linkName": "Situacin Laboral",
                  "linkURL": "/US/ag/kyc/data-capture/index/category/employmentInformation"
                }
                ,
                {
                  "linkName": "Informacin sobre Ingresos",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Saldo y Beneficios",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Categora de Relacin",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Alertas de Cuenta",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>Ms Configuraciones",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
  ,
    "CARDSAndPIL": {
      "subMenuLinks": [
        {
          "subMenuParentId": "paymentsandTransfers",
          "subMenuLinksList": [
            {
              "paymentsMenuList": [
                {
                  "linkName": "Pagar Tarjetas de Cr&eacute;dito Citi",
                  "linkURL": "/US/CBOL/pnt/crecarpay/flow.action"
                }
                ,
                {
                  "linkName": "Administrar Auto Deduct",
                  "linkURL": "/US/ag/autoDeduct",
                  "show": {
                    "==": [{
                      "var": "autoDeduct" }
                           ,"Y"]}
                }
              ]
            }
            ,
            {
              "transfersMenuList": [
                {
                  "linkName": "Tus Cuentas Externas",
                  "linkURL": "/US/JRS/iit/InitProcessing.do?ID=CETransferAccounts",
                  "show": {"==": [{ "var": "isBusinessCust" }, "N"]}
                }
                ,
               
                
                {
                  "linkName": "Transferencia de Saldo",
                  "linkURL": "/US/ag/btlanding",
                  "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
                },
                {
                "linkName": "Transfer My Investments to Citi",
                "linkURL": "/US/ag/acat",
                "show": {"and" : [ { "==": [{ "var": "hasCZ4" }, "Y"]},{"==": [{"var":"isOnlyCZ4"},"Y"]}]}
              }
              ]
            }
          ]
        }
        ,
         {
        "subMenuParentId": "exploreProducts",
        "subMenuLinksList": [
          {
            "CheckingAndSavingsMenuList": [
              {
                "linkName": "Descripcin General de Servicios Bancarios",
                "linkURL": "/US/banking/citi.action?ID=banking-overview"
               
              },
			  {
				"linkName": "Cuentas de Cheques",
                "linkURL": "/US/ag/banking/checking-account"
           
			  },
			  {
				"linkName": "Cuentas de Ahorros",
                "linkURL": "/US/banking/citi.action?ID=savings-account-overview"
                
			  },
              {
                "linkName": "Certificados de Depsito (CD)",
                "linkURL": "/US/banking/citi.action?ID=cd-ira-account-overview"
                
              }
              ,
              {
                "linkName": "Cuentas de Retiro Individual (IRA)",
                "linkURL": "/US/banking/cd-ira/citi.action?ID=citi-ira"
                
              },
              {
                "linkName": "Tasas",
                "linkURL": "/US/ag/current-interest-rates/checking-saving-accounts"
                
              }
              ,
              {
                "linkName": "Pequeas Empresas",
                "linkURL": "https://www.citi.com/small-business-banking"
              }
               ]
          }
          ,
          {
            "CreditCardMenuList": [
               {
              "linkName": "Ver Todas las Tarjetas de Crdito",
              "linkURL": "https://www.citi.com/credit-cards/compare/view-all-credit-cards?intc=citihpmenu~creditcards~vac"
            },
                {
              "linkName": "Recompensas",
              "linkURL": "https://www.citi.com/credit-cards/compare/rewards-credit-cards?intc=citihpmenu~creditcards~rewards"
            },
            {
              "linkName": "0% APR Inicial",
              "linkURL": "https://www.citi.com/credit-cards/compare/0-percent-intro-apr-credit-cards?intc=citihpmenu~creditcards~intro"
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "https://www.citi.com/credit-cards/compare/balance-transfer-credit-cards?intc=citihpmenu~creditcards~bt"
            },
            {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/credit-cards/compare/business-credit-cards?intc=citihpmenu~creditcards~smallbus"
            }
            
           
        ]
      },
           {
              "InvestingMenuList":[
			  {
              "linkName": "Inversin Autodirigida",
              "linkURL": "/US/ag/citi-self-invest",
                  "show": true
            },
            {
              "linkName": "Inversin Guiada",
              "linkURL": "/US/ag/cwb?entry=topnav",
                  "show": true
            },
            {
              "linkName": "Trabajando con un Asesor",
              "linkURL": "/JRS/pands/detail.do?ID=InvestWithPersonalAdvisor",
              "show": true
            }
        ]
      },
          
      
          
      {
        "LendingMenuList": [
              	{
              "linkName": "Prstamos Personales",
              "linkURL": "/US/ag/lending/landingroute?intc=pil_topnav"
            },
            {
              "linkName": "Flex Loan",
              "linkURL": "/US/ag/citi-flex-loan/customizeloan",
			  "show": { "and" : [ { "==": [{ "var": "availableFlexLoanOffer" },"Y"]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
			 {
              "linkName": "Flex Pay",
              "linkURL": "/US/ag/citi-flex-pay/select-transaction",
			   "show": {
                  "==": [{
                    "var": "viewCitiFlexPayOffer"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Transferencia de Saldo",
              "linkURL": "/US/ag/btlanding",
             "show": { "and" : [{ "or" : [ { "==": [{ "var": "BTEnabled" }, "Y"]},{"==": [{"var":"BTStatus"},"Y"]},{ "==": [{ "var": "btenabled" }, "Y"]},{"==": [{"var":"btstatus"},"Y"]} ]}, {"!=": [{"var": "isPglLiteMode"},"Y"]}]}
            },
            {
              "linkName": "Credit Line Increase",
              "linkURL": "/US/ag/creditlineincrease?aoOfferParams=screenId:jJRSMENU_BenefitsAndServices|offerName:EC_P_ICLI_11142_1N|locID:SERVICING|offerID:ICLIGENR00|offerCat:CLI|origin:COR|flowOrigin:AccountServicing",
			  "show": {
                  "==": [{
                    "var": "creditLineIncreaseEnabled"
                  },
                         "Y"
                        ]
                }
            },
            {
              "linkName": "Hipoteca",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage"
            },
            {
              "linkName": "Garanta Hipotecaria",
              "linkURL": "/US/JRS/portal/template.do?ID=mortgage_heloc"
            },
            {
              "linkName": "Tasa Promocional para Compras",
              "linkURL": "/US/ag/rate-sale",
			  "show": {
                  "==": [{
                    "var": "isPromotionalPurOfferEligible"
                  },
                         "Y"
                        ]
                }
            },
           {
              "linkName": "Pequeas Empresas",
              "linkURL": "https://www.citi.com/small-business-banking/lending"
            }
           ]
          },
		   {
              "WealthManagementMenuList":[
                  {
              "linkName": "Citigold Private Client",
              "linkURL": "/US/ag/citigold-private-client",
                    "show": true
            },
			{
              "linkName": "Citigold<sup class='bsup'>&reg;</sup>",
              "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview",
              "show": true
            },
                  {
              "linkName": "Buscar un Equipo de Gestin de Patrimonios",
              "linkURL": "https://contactcitigold.citi.com/",
                    "show": true
                  }
              
        ]
      }
              ]
          },
        {
          "subMenuParentId": "services",
          "subMenuLinksList": [
            {
              "linkName": "Servicios Bancarios",
              "linkURL": "/US/ag/servicing/index?pageName=BankingServices"
            }
            ,
            {
              "linkName": "Servicios de Tarjeta de Crdito",
              "linkURL": "/US/ag/servicing/index?pageName=CreditCardServices"
            }
            ,
            {
              "linkName": "Servicios de Viaje",
              "linkURL": "/US/ag/tranotview",
              "show": {
                "==": [
                  {
                    "var": "travelNotificationEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Estados de Cuenta y Documentos",
              "linkURL": "/US/ag/servicing/index?pageName=StatementsAndDocumentServices"
            },
            {
            "linkName": "Financial Resource Center",
            "linkURL": "/US/ag/financial-resource-center",
               "show": {
              "==": [
                {
                  "var": "isFrcEnabled"
                }
                ,
                "Y"
              ]
            }
          }
          ]
        }
        ,
        {
          "subMenuParentId": "rewards",
          "subMenuLinksList": [
            {
              "linkName": "Recompensas de Costco Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/costco?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "costcoCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Expedia&#174; Rewards",
              "linkURL": "/US/ag/rewards/dashboard/expedia?accountInstanceId="
              ,
              "show": {
                "==": [
                  {
                    "var": "expediaCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Double Cash Rewards",
              "linkURL": "/US/ag/rewards/dashboard/cashback?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "doubleCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Recompensas Cash Rewards Personalizadas",
              "linkURL": "/US/ag/rewards/dashboard/thankyou?accountInstanceId=",
              "show": {
                "==": [
                  {
                    "var": "customCashReward"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "ThankYou Rewards",
              "linkURL": "/US/ag/citi-partner-sso/ThankYou",
              "show": {
                "==": [
                  {
                    "var": "isTYEligible"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
              "linkName": "Ofertas para Ti",
              "linkURL": "/US/ag/citioffersforyou",
              "show": {
                "==": [
                  {
                    "var": "offerForYouEnabled"
                  }
                  ,
                  "Y"
                ]
              }
            }
            ,
            {
            "linkName": "Citi Entertainment<sup>&reg;</sup>",
            "linkURL": "https://www.citientertainment.com/?utm_source=CBOL&utm_medium=RewardsOffers",
            "linkTarget": "_blank",
            "show": true            
          	}
          	,
            {
              "linkName": "Beneficios de la Tarjeta",
              "linkURL": "/US/ag/sso/index?tenantId=BenefitBuilder"
            }
          ]
        }
        ,
     {
        "subMenuParentId": "productExplorer",
        "subMenuLinksList": [
          {
            "productExplorerHeader": [
              {
                "linkTitle": "Explora",
                "linkText": "Aqu encontrars ofertas de tiempo limitado que te ayudarn a maximizar tus ahorros, ganar puntos de recompensa, disfrutar de beneficios adicionales y ms."
              }
            ]
          }
          ,
          {
            "productExplorer1List": [
              {
                "linkName": "<span class=\"creditCardsIcon\"></span><span>Tarjeta de Crdito</span>",
                "linkURL": {
                  "var": "marketingAllCardsUrl"
                }
                ,
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"lendingIcon\"></span><span>Prstamos</span>",
                "linkURL": "/US/JRS/portal/template.do?ID=mortgage_home_mortgage&intc=2~3~51~5~180901~8~Other~ProductExplorerLending",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"citigoldIcon\"></span><span>Citigold</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=CitigoldOverview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerCitigold",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"moneyMovementIcon\"></span><span>Invest with Citi</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerMoneyGuidePro",
                "show": "",
                "linkBorder": ""
              }
            ]
          }
          ,
          {
            "productExplorer2List": [
              {
                "linkName": "<span class=\"bankingIcon\"></span><span>Banca Personal</span>",
                "linkURL": "/US/banking/citi.action?ID=banking-overview&intc=2~3~51~5~180901~2~BANKACQ~ProductExplorerBanking",
                "show": "Y"
              }
              ,
              {
                "linkName": "<span class=\"investingIcon\"></span><span>Inversin</span>",
                "linkURL": "/US/JRS/pands/detail.do?ID=InvestingCiti&intc=2~3~51~5~180901~9~PFM~ProductExplorerInvesting",
                "show": "Y"
              }
            ]
          }
        ]
      }
      ,
        {
          "subMenuParentId": "profileSettings",
          "subMenuLinksList": [
            {
              "profilesSection": [
                {
                  "linkName": "Identificacin de Usuario",
                  "linkURL": "/US/ag/profile-update/change-userid"
                }
                ,
                {
                  "linkName": "Contrasea",
                  "linkURL": "/US/ag/profile-update/change-password"
                }
                ,
                {
                  "linkName": "Informacin de Contacto",
                  "linkURL": "/US/ag/ContactInfo/Profiles",
                  "show": {
                    "==": [
                      {
                        "var": "isCIEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                  "linkName": "Informacin sobre los Ingresos",
                  "linkURL": "/US/ag/updateincomeinfo/landingpage?targetAOApp=cfiOvly",
                  "show": {
                    "==": [
                      {
                        "var": "isIncomeInformationEligible"
                      }
                      ,
                      "Y"
                    ]
                  }
                }
                ,
                {
                "linkName": "Saldo y Beneficios",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiBlueCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
                ,
                {
                "linkName": "Categora de Relacin",
                "linkURL": "/US/ag/reward/CAMB",
                "show": {"and" : [ { "==": [{ "var": "isReiNonBauCust" }, "Y"]},{"!=": [{"var":"isCZ4Only"},"Y"]} ]} 
                }
              ]
            }
            ,
            {
              "settingsSection": [
                {
                  "linkName": "Alertas de Cuenta",
                  "linkURL": "/US/ag/alerts",
                  "show": { "and" : [{ "or" : [{ "==": [{ "var": "isManageAlerts" }, "Y"]},{"==": [{"var": "isEnrollAlerts"},"Y"]} ]},{ "!=": [{ "var": "isIBSAuth" }, "Y"]}]}
                }
                ,
                {
                  "linkName": "<span class=\"settingsIcon\"></span>Ms Configuraciones",
                  "linkURL": "/US/ag/servicing/index?pageName=Settings"
                }
              ]
            }
          ]
        }
      ]
    }
}
    }
    var viewPortWidth = $('body').width();
    /*Adding the below tag dynamically as certian layouts are not having this tag in legacy*/
    $('head').append('<meta name="viewport" content="width=device-width, initial-scale=1"/>');
    var selectedNavMenu = sessionStorage.getItem("selectedNavMenu", selectedNavMenu);
    var fallBacksessionParams;
    var sessionParams;
    setSelectedMenuName(selectedNavMenu);
    resetMenu();
    setViewPortValue();
    var linkClicked = false;
    var accountsErrorFallbackFlag = false;
    var serviceLinksBeanAO = {};
    var serviceLinksFlag = getServiceLinksFlagAO();
    $('.seperator').removeClass("cbolui-hidden");
    $('.titleSeperator').addClass("cbolui-hidden");

    var hostUrl = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
    var locale = $.trim($("#locale").html());
    if (locale == null || locale == "") {
    	var localeFromCookie = getCookie("locale")
    	if (localeFromCookie != null && localeFromCookie != ""){
    		localeFromCookie = localeFromCookie.substring(0,5);
    		if(localeFromCookie == "es_US"){
    			locale =  localeFromCookie;
    		} else{
    			locale = "en_US";
    		}
    	} else {
    		locale = "en_US";
    	}

    } else {
    	locale = locale + "_US";
    }

    if (hostUrl.indexOf('accountonline') != -1) {
        var jsonUrl = hostUrl + "/cards/wv/CBOL/IA/Legacy/TopNav/" + locale + "/subMenu.json";
    } else {
        var jsonUrl = hostUrl + "/CBOL/IA/Legacy/TopNav/" + locale + "/subMenu.json";
    }
    var customerType = "";
    /*Added Timeout since ngapostbranding.jws takes time to set the session storage value*/
    setTimeout(function () {
       var sessionPostBrandingStorageObject = sessionStorage.getItem("sessionPostBrandingStorage");
        if (sessionPostBrandingStorageObject) {
       
            sessionPostBrandingStorageObject = JSON.parse(sessionPostBrandingStorageObject);
            var isCitiAllianceOnly = sessionPostBrandingStorageObject.serviceLinksBean.isCitiAllianceOnly;
          if ($("#customerType").length > 0 && $("#customerType").html() != "") {
            console.log("citialliance bank customer" + $("#customerType").html());
if (isCitiAllianceOnly=="Y" && ($("#customerType").html()=="BANK")){
  console.log("bank customer legacy citialliance");
  $("#exploreProducts .dropdown-menu").addClass('citiallinace');

  
$("#exploreProducts .dropdown-menu").attr("style","min-width:720px !important");
 
}
        
        }
        }
        sessionParams = sessionStorage['sessionPostBrandingStorage'] || localStorage['sessionPostBrandingStorage'] || null;
        if (sessionParams !== null && sessionParams !== "" && sessionParams !== "null") {
            try {
                accountsErrorFallbackFlag = false;
                //window.name = sessionParams;
                sessionParams = JSON.parse(sessionParams);
                customerType = sessionParams.customerType;
                console.log("Session Storage is available");
            } catch (err) {
                console.log("Error in session Storage Param" + err);
                accountsErrorFallback();
                accountsErrorFallbackFlag = true;

            }

        } else {
            console.log("Session Storage Not Available");
            accountsErrorFallbackFlag = true;
            accountsErrorFallback();
        }
        if (hostUrl.indexOf('accountonline') != -1 || hostUrl.indexOf('online') != -1) {
            console.log("CBOL or AO page, so making Ajax request to get the submenu json")
            var promise = getSubLinksJson();
        } else {
            console.log("Not a CBOL or AO page , getting submenu from JS")
            if ($("#customerType").length > 0 && $("#customerType").html() != "") {
                customerType = $.trim($("#customerType").html());

            } else {
                customerType = "MRC"
            }
            var subMenuresponse = submenuJSON[locale];
            getSubMenuJson(subMenuresponse);
        }
        if (accountsErrorFallbackFlag) {
            $(".overviewLink").removeClass("cbolui-hidden");
            $("#topNavAccounts .leftSection, #topNavAccounts .rightSection").addClass("cbolui-hidden");
        } else {
            $("#topNavAccounts .leftSection, #topNavAccounts .rightSection").removeClass("cbolui-hidden");
        }
        attachEventHandlers();
        if ((typeof (cbolURL) != 'undefined' && cbolURL != "")) {
            navigationUrlChange(cbolURL);
        } else if ((typeof (externalDomain) != 'undefined' && externalDomain != "")) {
            navigationUrlChange(externalDomain);
        }

        setSelectedLink();
        /*if(localStorage.getItem("toolTipVisited") == null || localStorage.getItem("toolTipVisited") == '') {
            showProfileTooltip();
         } else {
              $("#profileSettings").addClass('tooltipShown');
         }*/

    }, 1500);


    function showProfileTooltip() {
        $(".dropdown #topNavTooltipWelcomeContainer").remove();
        $("#profileSettings").append($("#tooltipWelcomeWrapper").html());
        $("#profileSettings #topNavTooltipWelcomeContainer").removeClass("cbolui-hidden");
        $("#profileSettings").on("click", "#topNavtooltipWelcomeCloseIcon", function (e) {
            $(".dropdown #topNavTooltipWelcomeContainer").addClass("cbolui-hidden");
            $("#profileSettings").addClass('tooltipShown');
        })
        localStorage.setItem("toolTipVisited", "true");

    }

    function getSubLinksJson() {
        $.ajax({
            url: jsonUrl,
            type: "GET",
            async: false,
            crossDomain: true,
            dataType: "json",
            success: function (data, status, jqXHR) {
                try {
                    console.log("Successfull JSON response")
                    var subMenuresponse = data;
                    getSubMenuJson(subMenuresponse);

                } catch (error) {
                    console.log("Error in JSON response.." + error);
                    if ($("#customerType").length > 0 && $("#customerType").html() != "") {
                        customerType = $.trim($("#customerType").html());

                    } else {
                        customerType = "MRC"
                    }
                    var subMenuresponse = submenuJSON[locale];
                    getSubMenuJson(subMenuresponse);
                }
            },
            error: function (data, status, jqXHR) {
                console.log("Ajax call failed..");
                if ($("#customerType").length > 0 && $("#customerType").html() != "") {
                    customerType = $.trim($("#customerType").html());

                } else {
                    customerType = "MRC"
                }
                var subMenuresponse = submenuJSON[locale];
                getSubMenuJson(subMenuresponse);
            }
        });

    }
    function accountsErrorFallback() {
        // quick patch fix for cardbenefits.citi.com page, for low VA issue for Feb 2020 release.
        if (window.location.href.includes("test3.benefitbuilder.acxiom.com/default.aspx") || window.location.href.includes("cardbenefits.citi.com")) {
            if (window.coExistenceData === undefined) {
                // user is pre login
                console.log("detected cards benefits page, skipping fallBackSessionPostBrandingStorage;");
                return;
            }
        }
        // removed hardcoded senstive data report against VA issue.
        sessionStorage.setItem("fallbackSessionPostBrandingStorage", JSON.stringify({ "isMember": "Y", "isCitigold": "N", "isSegmentationFallback": "N", "isCitipriority": "Y", "isRELOnlyUser": "N", "isRDSSPFDashboardMigrated": "N", "isRDSADAStartPageEnabled": "N", "isSPFMigrated": "N", "hasCreditCard": "N", "isCostcoEmployeeUser": "N", "isNPSMakePymtInFallback": "N", "isPFMAccount": "Y", "isCinlessUser": "N", "isFriend": "N", "isSignOnOvlyFallback": "N", "messageListForCardOnlyCustomers": "", "cardsBranding_id": "CommonCard", "messageCount": "0", "regionalInfo": null, "lastLoginDateRDS": "N", "ficoScoreLink": "N", "ficoStatusClass": "", "ficoScoreDate": null, "isDomainUrl": "https://dit26.accountonline.citi.com", "isBusinessCust": "N", "isZywaveLinkFallback": "N", "isVisitor": "N", "isAACard": "N", "isHiltonCard": "N", "hasAAdvantageCard": "N", "hasAAdvantageCardNew": "N", "isNewATnTPID": "N", "teaLeafFallbackCheck": "N", "language": "en", "timeTradeStatus": "UPDATE_EMAIL", "isLinkDisplay": "N", "isCBOLASFooterLinkDisable": "Y", "mrcDashboardMessageListDisplay": null, "isInvestor": "N", "isBanker": "Y", "isTYForgotUUID": "N", "isTYMigration": "N", "isTYNewUser": "N", "isBusinessOnly": "N", "isCitiPriorityCookie": "-", "isCitiGoldCookie": "N", "userType": "", "isATTCard": "N", "serverInfo": "38.1", "userRole": "retailbank", "customerType": "MRC", "subBusinessLocale": null }));
           sessionParams = sessionStorage['fallbackSessionPostBrandingStorage'] || null;
           sessionParams = JSON.parse(sessionParams);
            if ($("#customerType").length > 0 && $("#customerType").html() != "") {
                customerType = $.trim($("#customerType").html());

            } else {
                customerType = "MRC"
            }

        console.log("Fall back function Executed");
    }

    function navigationUrlChange(domainURL) {


		$(".subMenuLink,#citiGold_Link,#profileLinks #signOff a,#nav_utility .iaUtility li a,.citiFooter a").each(function(){

			$old_url = $(this).attr('href');
			if(($old_url).indexOf('/US/') != -1){
			    if (($old_url).indexOf('ThankYou') != -1) {
			      $new_url = externalDomain + $old_url;
			     $(this).attr("href", "javascript:void(window.open('" +  $new_url + "','_blank'))");   
			    }else{
				$new_url = externalDomain + $old_url;
				$(this).attr('href',$new_url);
			    }
			}
		});
    	
    	
        $(".subMenuLink").on("click", function (e) {
            e.preventDefault();
            e.stopPropagation();
            var url = $(this).attr("href");
            if (url.indexOf('/US/') != -1) {
                if (url.indexOf('/thankyou/') != -1) {
                    var relativeUrl = url;
                    url = domainURL + url;
                    $(this).attr("href", "javascript:void(window.open('" + url + "','_blank'))");
                    window.location.href = $(this).attr("href");
                    $(this).attr("href", relativeUrl);
                } else {
                    window.location.href = url;
                }

            } else {
                window.location.href = url;
            }
        })

    }


   function getSubMenuJson(subMenuresponse) {
        subMenuresponse = subMenuresponse[customerType];
        var accountslinks = {
            "subMenuLinksList": [
            ]
        };
        var accountsSection1 = {
            "accountsSection1List": [
            ]
        };
        var accountsSection2 = {
            "accountsSection2List": [
            ]
        };
     var accountsSection3 = {
            "accountsSection3List": [
            ]
        }
        accountslinks.subMenuLinksList.push(accountsSection1);
        accountslinks.subMenuLinksList.push(accountsSection2);
      accountslinks.subMenuLinksList.push(accountsSection3);
        accountslinks.subMenuParentId = "topNavAccounts";
        if (sessionParams.accounts != null && sessionParams.accounts != 'null' && sessionParams.accounts != '') {
               
            if (sessionParams.accounts.length > 5) {
                $("#topNavAccounts").addClass("accountsSection");
            } else {
                $("#topNavAccounts").removeClass("accountsSection")
            }
			if(viewPortWidth > 1120){
             

            for (i = 0; i < 7; i++) {

                 if (i <= 6 && sessionParams.accounts[i] != null) {
                    var paymentsLinks = {};
                    paymentsLinks.linkName = sessionParams.accounts[i].description;
                    paymentsLinks.linkURL = sessionParams.accounts[i].navigationURL;
                    paymentsLinks.completeAccountName = sessionParams.accounts[i].completeDescription;
                    //accountsSection1.accountsSection1List.push(accountsSection1);
                    accountslinks.subMenuLinksList[0].accountsSection1List.push(paymentsLinks);
                }

            }
            
            if(sessionParams.accounts.length > 7){
            	var seeAllAccounts = {};
              if((lang == "es_US_USGCB")==true){
                  seeAllAccounts.linkName = 'Ver Todas las cuentas';
            	seeAllAccounts.linkURL = "/US/ag/mrc/dashboard";
            	seeAllAccounts.completeAccountName = 'Ver Todas las cuentas';
            	 accountslinks.subMenuLinksList[0].accountsSection1List.push(seeAllAccounts);  
                } else{
                  seeAllAccounts.linkName = 'See All Accounts';
            	seeAllAccounts.linkURL = "/US/ag/mrc/dashboard";
            	seeAllAccounts.completeAccountName = 'See All Accounts';
            	 accountslinks.subMenuLinksList[0].accountsSection1List.push(seeAllAccounts);
                }
              }
             }
			 else{
			for (i = 0; i < sessionParams.accounts.length; i++) {

                if (i <= 4 && sessionParams.accounts[i] != null) {
                    var paymentsLinks = {};
                    paymentsLinks.linkName = sessionParams.accounts[i].description;
                    paymentsLinks.linkURL = sessionParams.accounts[i].navigationURL;
                    paymentsLinks.completeAccountName = sessionParams.accounts[i].completeDescription;
                    //accountsSection1.accountsSection1List.push(accountsSection1);
                    accountslinks.subMenuLinksList[0].accountsSection1List.push(paymentsLinks);
                }

                if (i > 4 && sessionParams.accounts[i] != null) {
                    var transferslinks = {};
                    transferslinks.linkName = sessionParams.accounts[i].description;
                    transferslinks.linkURL = sessionParams.accounts[i].navigationURL;
                    transferslinks.completeAccountName = sessionParams.accounts[i].completeDescription;
                    // accountsSection2.accountsSection2List.push(accountsSection2);
                    accountslinks.subMenuLinksList[1].accountsSection2List.push(transferslinks);
                }

			  }
			}

        } else {
            console.info("accounts is null in session storage")
            accountsErrorFallbackFlag = true;
        }
        subMenuresponse.subMenuLinks.push(accountslinks);
        var submenuJSONLength = subMenuresponse.subMenuLinks.length;

        for (i = 0; i < submenuJSONLength; i++) {
            var parentId = subMenuresponse.subMenuLinks[i].subMenuParentId;
            subMenuresponse.subMenuLinks[i] = showHideLinks(subMenuresponse.subMenuLinks[i]);
//            console.log(subMenuresponse.subMenuLinks[i]);
            $("#" + parentId + " .dropdown-menu").html("");
            if ($("#subMenuTemplate").length > 0) {
                jQuery("#subMenuTemplate").tmpl(subMenuresponse.subMenuLinks[i]).appendTo("#" + parentId + " .dropdown-menu");
                if ($("#" + parentId + "Mobile .dropdown-menu").length > 0) {		
                    jQuery("#subMenuTemplate").tmpl(subMenuresponse.subMenuLinks[i]).appendTo("#" + parentId + "Mobile .dropdown-menu");		
                }
            }
        }
     if (viewPortWidth >= 1121) {
       if (sessionParams.accounts != null && sessionParams.accounts != 'null' && sessionParams.accounts != '') {
      if (sessionParams.accounts.length <= 2) {
$("#topNavAccounts .dropdown-menu ul").css('column-count','1');
        $("#topNavAccounts .dropdown-menu").css("width","150px");
               }
               if (sessionParams.accounts.length >=3 && sessionParams.accounts.length <=5) {

        $("#topNavAccounts .dropdown-menu").css("width","450px");
                 $("#topNavAccounts .dropdown-menu ul").css('column-count','2');
               }
          if (sessionParams.accounts.length >=6) {

        $("#topNavAccounts .dropdown-menu").css("width","600px");
                 $("#topNavAccounts .dropdown-menu ul").css('column-count','3');
               }
         }
     }
        showHideOverviewLink();
        showhideTransfersSection();
        showhidePaymentsSection();
        exploreProductsMobile();
     	showHideExploreCreditCard();

        console.log("Sub Menu Template appended");

    }
    function exploreProductsMobile(){
    	$("#exploreProductsMobileLinks h4").remove();
    	$("#checkingAndSavingsSubdrop .dropdown-menu ul").not($(".leftSection")).remove();
    	$("#creditCardsSubdrop .dropdown-menu ul").not($(".middleSection")).remove();
    	$("#investingSubdrop .dropdown-menu ul").not($(".middleSection1")).remove();
    	$("#lendingSubdrop .dropdown-menu ul").not($(".middleSection2")).remove();
    	$("#wealthManagementSubdrop .dropdown-menu ul").not($(".rightSection")).remove();
    }   

    function showHideOverviewLink() {
        if (sessionParams.accounts != null && sessionParams.accounts != 'null' && sessionParams.accounts != '') {
            if (sessionParams.accounts.length > 1) {
                $(".overviewLink").removeClass("cbolui-hidden");
            } else {
                $(".overviewLink").addClass("cbolui-hidden");
            }
        } else {
            console.info("accounts is null in session storage")
            accountsErrorFallbackFlag = true;
        }
    }
	function showHideExploreCreditCard(){
          var creditLinksLength = $("#exploreProducts .middleSection li").length;
        if (creditLinksLength == 0) {
            $("#exploreProducts .middleSection h4").addClass("cbolui-hidden");
            $("#exploreProducts .middleSection .titleSeperator").remove();            
                $("#citi-topNav-container.cbolui-ddl-topNav.citi-topNav .exploreProducts .dropdown-menu").attr("style","min-width:912px !important");
        } else {
            $("#exploreProducts .middleSection h4").removeClass("cbolui-hidden");
        }

        }

    function showhideTransfersSection() {
        var transfersLinksLength = $("#paymentsandTransfers .rightSection li").length;
        if (transfersLinksLength == 0) {
            $("#paymentsandTransfers .rightSection .pntTitle").addClass("cbolui-hidden");
            $("#paymentsandTransfers .dropdown-menu .titleSeperator").remove();

        } else {
            $("#paymentsandTransfers .rightSection .pntTitle").removeClass("cbolui-hidden");
        }
    }

    function showhidePaymentsSection() {
        var paymentsLinksLength = $("#paymentsandTransfers .leftSection li").length;
        if (paymentsLinksLength == 0) {
            $("#citi-topNav-container.cbolui-ddl-topNav.citi-topNav .paymentsandTransfers .dropdown-menu").css("min-width", "250px");
            $("#paymentsandTransfers .leftSection .pntTitle").addClass("cbolui-hidden");
            $("#paymentsandTransfers .rightSection").removeClass("rightSection").addClass("leftSection");
        }
    }

    function showHideLinks(linksList) {
        if (linksList.subMenuParentId == 'paymentsandTransfers') {
            for (m = 0; m < linksList.subMenuLinksList.length; m++) {
                applyJsonLogicForSubLinks(linksList.subMenuLinksList[m]);
            }
        } else if (linksList.subMenuParentId == 'profileSettings') {
            for (n = 0; n < linksList.subMenuLinksList.length; n++) {
                applyJsonLogicForSubLinks(linksList.subMenuLinksList[n]);
            }
        } else if (linksList.subMenuParentId == 'productExplorer') {
            for (p = 0; p < linksList.subMenuLinksList.length; p++) {
                applyJsonLogicForSubLinks(linksList.subMenuLinksList[p]);
            }
        } else if (linksList.subMenuParentId == 'exploreProducts') {
            for (p = 0; p < linksList.subMenuLinksList.length; p++) {
                applyJsonLogicForSubLinks(linksList.subMenuLinksList[p]);
            }
        } else {
            applyJsonLogic(linksList);
        }

        return linksList;
    }

    function getServiceLinksFlagAO() {

        var servicesLinksBeanHtml = $.trim($("#serviceLinkBean").html());

        if (servicesLinksBeanHtml != '') {

            var splitFlags = servicesLinksBeanHtml.split(",");

            for (z = 0; z < splitFlags.length; z++) {

                var indexOfColon = splitFlags[z].indexOf(":");
                var flagName = splitFlags[z].substring(0, indexOfColon);
                var flag = splitFlags[z].substring(indexOfColon + 1);
                serviceLinksBeanAO[flagName] = flag

            }

            return serviceLinksBeanAO;

        }

    }






    function applyJsonLogicForSubLinks(linksList) {
        if (linksList.paymentsMenuList) {
            linksList.subMenuLinksList = linksList.paymentsMenuList;
        }
        else if (linksList.transfersMenuList) {
            linksList.subMenuLinksList = linksList.transfersMenuList;
        }
        else if (linksList.profilesSection) {
            linksList.subMenuLinksList = linksList.profilesSection;
        }
        else if (linksList.settingsSection) {
            linksList.subMenuLinksList = linksList.settingsSection;
        }
        else if (linksList.productExplorer1List) {
            linksList.subMenuLinksList = linksList.productExplorer1List;
        }
        else if (linksList.productExplorer2List) {
            linksList.subMenuLinksList = linksList.productExplorer2List;
        }
        else if (linksList.productExplorer3List) {
            linksList.subMenuLinksList = linksList.productExplorer3List;
        }
        else if (linksList.CheckingAndSavingsMenuList) {
            linksList.subMenuLinksList = linksList.CheckingAndSavingsMenuList;
        }
        else if (linksList.CreditCardMenuList) {
            linksList.subMenuLinksList = linksList.CreditCardMenuList;
        }
        else if (linksList.InvestingMenuList) {
            linksList.subMenuLinksList = linksList.InvestingMenuList;
        }
        else if (linksList.LendingMenuList) {
            linksList.subMenuLinksList = linksList.LendingMenuList;
        }
        else if (linksList.WealthManagementMenuList) {
            linksList.subMenuLinksList = linksList.WealthManagementMenuList;
        }
        applyJsonLogic(linksList);
    }

    function applyJsonLogic(linksList) {
//        console.log(serviceLinksFlag);
        if (linksList.subMenuLinksList != undefined) {
            for (k = 0; k < linksList.subMenuLinksList.length; k++) {

                if (hostUrl.indexOf('accountonline') != -1 || sessionParams.serviceLinksBean == undefined) {

                    if (linksList.subMenuLinksList[k].show == undefined) {
                        linksList.subMenuLinksList[k].show = true;
                    } else {
                        linksList.subMenuLinksList[k].show = jsonLogic.apply(linksList.subMenuLinksList[k].show, serviceLinksFlag);
                    }
                    linksList.subMenuLinksList[k].linkURL = jsonLogic.apply(linksList.subMenuLinksList[k].linkURL, serviceLinksFlag);
                  
                  if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Double Cash') != -1 && serviceLinksFlag.doubleCashAccountId != undefined && null!= serviceLinksFlag.doubleCashAccountId && serviceLinksFlag.doubleCashAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(serviceLinksFlag.doubleCashAccountId);
                    }
                     else if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Costco Cash') != -1 && serviceLinksFlag.costcoAccountId != undefined && null!= serviceLinksFlag.costcoAccountId && serviceLinksFlag.costcoAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(serviceLinksFlag.costcoAccountId);
                    }
                  	 else if(linksList.subMenuLinksList[k].linkName != undefined && (linksList.subMenuLinksList[k].linkName.indexOf('Custom Cash') != -1 || linksList.subMenuLinksList[k].linkName.indexOf('Recompensas Cash Rewards') != -1) && serviceLinksFlag.customCashAccountId != undefined && null!= serviceLinksFlag.customCashAccountId && serviceLinksFlag.customCashAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(serviceLinksFlag.customCashAccountId);
                    }
                     else if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Expedia') != -1 && serviceLinksFlag.expediaAccountId != undefined && null!= serviceLinksFlag.expediaAccountId && serviceLinksFlag.expediaAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(serviceLinksFlag.expediaAccountId);
                    }
                }
                else {
                    if (linksList.subMenuLinksList[k].show == undefined) {
                        linksList.subMenuLinksList[k].show = true;
                    } else {
                        linksList.subMenuLinksList[k].show = jsonLogic.apply(linksList.subMenuLinksList[k].show, sessionParams.serviceLinksBean)
                    }
                    linksList.subMenuLinksList[k].linkURL = jsonLogic.apply(linksList.subMenuLinksList[k].linkURL, sessionParams.serviceLinksBean);
                   if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Double Cash') != -1 && sessionParams.serviceLinksBean.doubleCashAccountId != undefined && null!= sessionParams.serviceLinksBean.doubleCashAccountId && sessionParams.serviceLinksBean.doubleCashAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(sessionParams.serviceLinksBean.doubleCashAccountId);
                    }
                     else if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Costco Cash') != -1 && sessionParams.serviceLinksBean.costcoAccountId != undefined && null!= sessionParams.serviceLinksBean.costcoAccountId && sessionParams.serviceLinksBean.costcoAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(sessionParams.serviceLinksBean.costcoAccountId);
                    }
                  else if(linksList.subMenuLinksList[k].linkName != undefined && (linksList.subMenuLinksList[k].linkName.indexOf('Custom Cash') != -1 || linksList.subMenuLinksList[k].linkName.indexOf('Recompensas Cash Rewards') != -1)  &&  sessionParams.serviceLinksBean.customCashAccountId != undefined && null!=  sessionParams.serviceLinksBean.customCashAccountId &&  sessionParams.serviceLinksBean.customCashAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat( sessionParams.serviceLinksBean.customCashAccountId);
                    }
                     else if(linksList.subMenuLinksList[k].linkName != undefined && (linksList.subMenuLinksList[k].linkName.indexOf('Custom Cash') != -1 || linksList.subMenuLinksList[k].linkName.indexOf('Recompensas Cash Rewards') != -1) && sessionParams.serviceLinksBean.customCashAccountId != undefined && null!= sessionParams.serviceLinksBean.customCashAccountId && sessionParams.serviceLinksBean.customCashAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(sessionParams.serviceLinksBean.customCashAccountId);
                    }
                     else if(linksList.subMenuLinksList[k].linkName != undefined && linksList.subMenuLinksList[k].linkName.indexOf('Expedia') != -1 && sessionParams.serviceLinksBean.expediaAccountId != undefined && null!= sessionParams.serviceLinksBean.expediaAccountId && sessionParams.serviceLinksBean.expediaAccountId != '' ){
                         linksList.subMenuLinksList[k].linkURL =  linksList.subMenuLinksList[k].linkURL.concat(sessionParams.serviceLinksBean.expediaAccountId);
                    }
                }
            }
        }
    }

    function setViewPortValue() {
        if (window.matchMedia !== undefined && ((window.matchMedia('(max-width: 1120px)').matches) || ((window.matchMedia('(max-width: 1120px)').matches == false) && (window.matchMedia('(min-width: 1121px)').matches == false)))) {
            viewPortWidth = 1120;
            //$("#citi-topNav-container").addClass("mobileBreakpointTopNav");
            if ($("#search_container").hasClass("search_active")) {
                $(".container-fluid").addClass("searchOpen");
                $(".navbar-header").addClass("cbolui-hidden");
            } else {
                $(".container-fluid").removeClass("searchOpen");
                $(".navbar-header").removeClass("cbolui-hidden");
            }
        } else {
            viewPortWidth = 1121;
            $("#citi-topNav-container").removeClass("mobileBreakpointTopNav");
            $(".container-fluid").removeClass("searchOpen");
        }
    }
    function setSelectedMenuName(selectedNavMenu) {
        var bodyID = $('body').attr("id");
        if (bodyID != null) {
            bodyID = bodyID.toLowerCase();
            if (bodyID.match(/dashboard/g) || bodyID.match(/cardada/g) || bodyID.match(/ada/g)) {
                $("#topNavAccounts .dropdown-toggle").addClass("selectedMenu");
                $(".navbar-brand").html($("#topNavAccounts a.dropdown-toggle").text());
            }
            else if (bodyID.match(/paymentntransfers/g) || bodyID.match(/pnt/g) || bodyID.match(/crecarpay/g) || bodyID.match(/cxcaccount/g)) {
                $("#paymentsandTransfers .dropdown-toggle").addClass("selectedMenu");
                $(".navbar-brand").html($("#paymentsandTransfers a.dropdown-toggle").text());
            } else if (bodyID.match(/accountstatements/g) || bodyID.match(/edelivery/g) || bodyID.match(/jeacitialerts/g) || bodyID.match(/prodserv/g)) {
                $("#services .dropdown-toggle").addClass("selectedMenu");
                $(".navbar-brand").html($("#services a.dropdown-toggle").text());
            } else if (bodyID.match(/redeem/g)) {
                $("#rewards .dropdown-toggle").addClass("selectedMenu");
                $(".navbar-brand").html($("#rewards a.dropdown-toggle").text());

            } else if (bodyID.match(/pwd/g) || bodyID.match(/uid/g) || bodyID.match(/contactinfo/g) || bodyID.match(/contactinfo/g) || bodyID.match(/HomeCommPage/g)) {
                $("#profileSettings .dropdown-toggle").addClass("selectedMenu");
                $(".navbar-brand").html($("#profileSettings a.dropdown-toggle .cbolui-sr-only").text());

            }
            else {
                setSelectedMenuFromStorage();
            }
        }
        else {
            setSelectedMenuFromStorage();
        }
    }

    function setSelectedMenuFromStorage() {
        if (selectedNavMenu !== "" && typeof (selectedNavMenu) !== 'undefined' && selectedNavMenu != null) {
            $(".navbar-brand").html(selectedNavMenu);
        } else {
            $(".navbar-brand").html($(".dropdown:first a.dropdown-toggle").text());
        }
        var selectedNavMenuDesktop = sessionStorage.getItem("selectedNavMenuDesktop");

        if (selectedNavMenuDesktop !== "" && typeof (selectedNavMenuDesktop) !== 'undefined' && selectedNavMenuDesktop != null) {
            $("#" + selectedNavMenuDesktop + " .dropdown-toggle").addClass("selectedMenu");
        }
        sessionStorage.setItem("selectedNavMenuDesktop", "");
        sessionStorage.setItem("selectedNavMenu", "");

    }

    function resetMenu() {
        $("#navigationMenu").removeClass("cbolui-hidden");
      if (viewPortWidth >= 1121) {
       $('.dropdown').removeClass('open cbolui-hidden');
      }
        $(".glyphicon-minus").addClass("cbolui-hidden cM-hide");
        $(".glyphicon-plus").removeClass("cbolui-hidden cM-hide");
    }

    function getCookie(name) {
        var c = "" + document.cookie;
        var index = c.indexOf(name + "=");
        if (index === -1) return null;
        var endstr = c.indexOf(";", index);
        if (endstr === -1) endstr = c.length;

        return unescape(c.substring(index + name.length + 1, endstr));
    }

    function getCookieValue(cookie, field) {
        var cookieData = getCookie(cookie);
        var reg = new RegExp(field + "=([^|]*)", "i");
        var cookieArray = reg.exec(cookieData);
        if (cookieArray == null) {
            return null;
        }
        if (cookieArray[1] === "null") {
            cookieArray[1] = null
        }
        return cookieArray[1];
    }

    function setSelectedLink() {
        $(".subMenuLink").on("click", function (e) {
            var clickedMenuID = $(this).closest('.dropdown').attr("id");
            var clickedMenuIndex = $(this).closest('.dropdown').index();
            var topNavText = $("#" + clickedMenuID + " .dropdown-toggle").text();
            sessionStorage.setItem("selectedNavMenuDesktop", clickedMenuID);
            sessionStorage.setItem("menuElementText", topNavText);
            $(".dropdown:visible").each(function (n) {
                var menuId = $(this).attr("id");
                if (menuId == clickedMenuID) {
                    sessionStorage.setItem("selectedMenuIndex", n);
                    return;
                }
            })
        })
    }

    function attachEventHandlers() {
        $(window).on("resize", function () {
            setViewPortValue();
            selectedNavMenu = $.trim($(".selectedMenu").text());
            setSelectedMenuName(selectedNavMenu);
            resetMenu();
        });

        $(".dropdown-toggle").on("mouseenter focus click", function (e) {
            e.stopImmediatePropagation();
            e.stopPropagation();
            if ((e.type == "click" && viewPortWidth < 1121) || (viewPortWidth < 1121 && e.type == "click")) {
                $(".glyphicon-minus").addClass("cbolui-hidden cM-hide");
                $(".glyphicon-plus").removeClass("cbolui-hidden cM-hide");
                $(".nav.navbar-nav.profileSection .dropdown-menu").removeClass("cbolui-hidden");
                var clickedMenu = $(this).parent().attr("id");
                selectedNavMenu = $("#" + clickedMenu + " a.dropdown-toggle").text();
                //setSelectedMenuName(selectedNavMenu);
                sessionStorage.setItem("selectedNavMenu", selectedNavMenu);
                //sessionStorage.setItem("selectedNavMenuDesktop",clickedMenu);
                if (($("#" + clickedMenu + ".dropdown").hasClass("open"))) {
                    $("#" + clickedMenu).removeClass("open");
                    $('.dropdown,.seperator').removeClass("cbolui-hidden");
                    //        $('.titleSeperator').addClass("cbolui-hidden");
                } else {
                    //        $('.dropdown').addClass("cbolui-hidden").removeClass('open');
                    $('.dropdown').removeClass('open');
                    $('.titleSeperator').removeClass("cbolui-hidden");
                    //        $('.seperator').addClass("cbolui-hidden");
                    $("#" + clickedMenu).addClass("open");
                    $("#" + clickedMenu).find(".glyphicon-minus").removeClass("cbolui-hidden cM-hide");
                    $("#" + clickedMenu).find(".glyphicon-plus").addClass("cbolui-hidden cM-hide");
                }
                return false;
            } else if (viewPortWidth >= 1121) {
                var clickedMenu = $(this).parent().attr("id");
                if (e.type == "click" || $("#" + clickedMenu).hasClass('open')) {
                    linkClicked = true;
                } else {
                    linkClicked = false;
                }
                $(".glyphicon-minus").addClass("cbolui-hidden cM-hide");
                $(".glyphicon-plus").removeClass("cbolui-hidden cM-hide");
                $(".nav.navbar-nav.profileSection .dropdown-menu").removeClass("cbolui-hidden");

                $('.dropdown').removeClass('open');
                $(".dropdown-toggle").attr('aria-expanded', 'false');

                $("#" + clickedMenu).addClass("open");
                $("#" + clickedMenu).find(".glyphicon-minus").removeClass("cbolui-hidden cM-hide");
                $("#" + clickedMenu).find(".glyphicon-plus").addClass("cbolui-hidden cM-hide");
                $("#" + clickedMenu).find(".dropdown-toggle").attr('aria-expanded', 'true');


                if (e.type == "click") {
                    // $(".dropdown-toggle").removeClass("selectedMenu");
                    //$("#" + clickedMenu + " .dropdown-toggle").addClass("selectedMenu");
                    // sessionStorage.setItem("selectedNavMenuDesktop",clickedMenu);
                }

                if (clickedMenu == "productExplorer") {
                    window.citiData.custLink = "product explorer";
                    Bootstrapper.ensEvent.trigger("customLinkClick");
                }

            }
            /**/
        })

        $(".mobileUser").on("click", function (e) {
            e.stopImmediatePropagation();
            $("#navigationMenu.nav.navbar-nav").toggleClass("cbolui-hidden");
            $("#profileLinks.nav.navbar-nav.profileSection .dropdown-menu").removeClass("cbolui-hidden");
            $("#navigationMenu.nav.navbar-nav li").removeClass("open");
            $('#profileSettings').toggleClass('open');
            $(".glyphicon-minus").addClass("cbolui-hidden");
            $(".glyphicon-plus").removeClass("cbolui-hidden");
            if ($('#profileSettings').hasClass("open") || $("#navigationMenu").is(":visible")) {
                $(".boxShadowMobile").removeClass("cbolui-hidden");
            } else {
                $(".boxShadowMobile").addClass("cbolui-hidden");
            }
        })

        $(document).on("click.window", "body", function (e) {
            $(".dropdown-toggle").attr('aria-expanded', 'false');
            if (viewPortWidth >= 1121 && !linkClicked)
            $('.dropdown').removeClass("cbolui-hidden").removeClass('open');
            $(".nav.navbar-nav").removeClass("cbolui-hidden");
            $(".nav.navbar-nav.profileSection .dropdown-menu").addClass("cbolui-hidden");
            $(".glyphicon-minus").addClass("cbolui-hidden");
            $(".glyphicon-plus").removeClass("cbolui-hidden");
            $(".dropdown-toggle").attr("aria-expanded, false");


            // $(".dropdown-toggle").off("hover.menuhover click.menu");

        })

        $("#navigationMenu, #profileLinks").on("mouseleave", function (e) {
            if (viewPortWidth >= 1121 && !linkClicked) {
                $('.dropdown').removeClass("cbolui-hidden").removeClass('open');
            }
        })
        
        $("#headerLogoLink").attr("href","javascript:lnk('/US/ag/mrc/dashboard')");        
        var tmxCall=true;
        
        $("#profileLinks").on("mouseover", function (e) {            
            if(tmxCall){
            getTMXRequestParams();
            tmxCall=false;
            }           
        })       
        
        function getTMXRequestParams() {
			console.log("tmxProfiling js execute");	
			jQuery.ajax({
				url:"/US/REST/ManageTMXProfile/TMXProfile.jws",
				type:"POST",
				async: false,
				success: function(showData,status, jqXHR){
					console.log("success"+showData.tmxFallback+showData.digitalApplicationType+showData.tmxSessionID+showData.orgID+showData.profilingURL);	
					if(showData.tmxFallback !=null && showData.tmxFallback == 'false'){
						console.log("tmxfallback");	
						if(showData.digitalApplicationType !=null && showData.tmxSessionID!=null && showData.orgID!=null){
							console.log("get everyparams"+showData.orgID+showData.digitalApplicationType+showData.tmxSessionID);	
								var JSLink = showData.profilingURL+"?org_id="+showData.orgID+"&session_id="+showData.tmxSessionID+"&allow_reprofile="+1;
								var JSElement = document.createElement('script');
								JSElement.src = JSLink;
								document.getElementsByTagName('head')[0].appendChild(JSElement);
								document.cookie="tmx_sessionid="+showData.tmxSessionID+"; path=/; domain=citi.com; secure";
								document.cookie="tmx_digitalApptype="+showData.digitalApplicationType+"; path=/; domain=citi.com; secure";
						}
				 
					}
				}
			});
		}


        $(document).on("click", ".menuToggle", function () {
            if ($(".glyphicon-menu-up").hasClass("cbolui-hidden")) {
                $("#navigationMenu").removeClass("hideForMobile");
                $(".glyphicon-menu-up").removeClass("cbolui-hidden");
                $(".glyphicon-menu-down").addClass("cbolui-hidden");
                $(".boxShadowMobile").removeClass("cbolui-hidden");
                $("#citi-topNav-container").addClass("menuShown");
            } else {
                $("#navigationMenu").addClass("hideForMobile");
                $(".glyphicon-menu-up").addClass("cbolui-hidden");
                $(".glyphicon-menu-down").removeClass("cbolui-hidden");
                $(".boxShadowMobile").addClass("cbolui-hidden");
                $("#citi-topNav-container").removeClass("menuShown");
            }
        })

        $("#search_container").on("click", function (e) {
            if (viewPortWidth < 1121) {
                e.preventDefault();
                if ($(".navbar-header").is(":visible")) {
                    $("#searchBoxMega").show();
                    $(".navbar-header,.boxShadowMobile").addClass("cbolui-hidden");
                    $("#navigationMenu").addClass("hideForMobile");
                    $(".container-fluid").addClass("searchOpen");
                    $("#citi-topNav-container").removeClass('menuShown');

                } else {
                    $("#searchBoxMega").hide();
                    $(".navbar-header").removeClass("cbolui-hidden");
                    $(".container-fluid").removeClass("searchOpen");
                    $(".glyphicon-menu-up").addClass("cbolui-hidden");
                    $(".glyphicon-menu-down").removeClass("cbolui-hidden");

                }
            }

        });
        /* For 3rd party SpeedBump issue on AppBadges */

        function openlink(e) {
            var t = $(e.target);
            window.modalFocus = e.currentTarget.id,
                t.is("a") ? (e.preventDefault(),
                    window.rel = t.attr("href")) : window.rel = t.parent().attr("href"),
                $("#overlayWrapper").show(),
                $("#speedbump-dialog-wrapper").show(),
                setTimeout(function () {
                    $("#speedbump-dialog-wrapper").focus(),
                        $(".dialogContentWrapper").focus()
                }, 100)
        }
        function OpenInNewTab(e) {
            window.open(e, "_blank").focus()
        }
        window.__gcse = {
            callback: gssCallback
        },
            $("a.dialog-trigger").off("click.dlg").on("click.dlg", function (e) {
                e.preventDefault(),
                    setTimeout(function () {
                        openlink(e)
                    }, 200)
            }),
            $("#dialogContinueBtn").off("keydown.dlg").on("keydown.dlg", function (e) {
                13 == e.keyCode ? (OpenInNewTab(rel),
                    $("#overlayWrapper").hide(),
                    $("#" + window.modalFocus).focus()) : 9 != e.keyCode || e.shiftKey || (e.preventDefault(),
                        $("div.dialog-closeBtn").focus())
            }),
            $("div.dialog-closeBtn").off("keydown.dlg").on("keydown.dlg", function (e) {
                setTimeout(function () {
                    13 == e.keyCode ? ($("#overlayWrapper").hide(),
                        $("#" + window.modalFocus).focus()) : 9 == e.keyCode && e.shiftKey && (e.preventDefault(),
                            $("#dialogContinueBtn").focus())
                });
            }),
            $("#dialogContinueBtn").off('click.dlg').on('click.dlg', function (e) {
                e.preventDefault(),
                    OpenInNewTab(rel),
                    $("#overlayWrapper").hide(),
                    $("#" + window.modalFocus).focus()
            }),
            $("div.dialog-closeBtn").off('click.dlg').on('click.dlg', function () {
                $("#overlayWrapper").hide(),
                    $("#" + window.modalFocus).focus()
            });


        // ADA for topNavigation

        for (var j = 0; j < document.getElementsByClassName("pntfirstUL").length; j++) {
            document.getElementsByClassName("pntfirstUL")[j].setAttribute('aria-labelledby', "paymentsList");
            document.getElementsByClassName("pntfirstUL")[j].setAttribute('role', "group");
        }

        for (var j = 0; j < document.getElementsByClassName("pntSecondUL").length; j++) {
            document.getElementsByClassName("pntSecondUL")[j].setAttribute('role', "group");
        }

        for (var j = 0; j < document.getElementsByClassName("accountsfirstUL").length; j++) {
            document.getElementsByClassName("accountsfirstUL")[j].setAttribute('aria-labelledby', "accountsList");
            document.getElementsByClassName("accountsfirstUL")[j].setAttribute('role', "group");
        }



        for (var j = 0; j < document.getElementsByClassName("accountssecondUL").length; j++) {
            document.getElementsByClassName("accountssecondUL")[j].setAttribute('role', "group");
        }
      
      
 for (var j = 0; j < document.getElementsByClassName("accountsthirdUL").length; j++) {
            document.getElementsByClassName("accountsthirdUL")[j].setAttribute('role', "group");
        }

        for (var j = 0; j < document.getElementsByClassName("productExplorerfirstUL").length; j++) {
            document.getElementsByClassName("productExplorerfirstUL")[j].setAttribute('aria-labelledby', "prodExplorerList");
            document.getElementsByClassName("productExplorerfirstUL")[j].setAttribute('role', "group");

        }

        for (var j = 0; j < document.getElementsByClassName("productExplorersecondUL").length; j++) {
            document.getElementsByClassName("productExplorersecondUL")[j].setAttribute('role', "group");

        }

        var paymentsUl = $('.pntfirstUL').find(">li");
        var pntCount1 = paymentsUl.length;

        var payments2Ul = $('.pntSecondUL').find(">li");
        var pntCount2 = payments2Ul.length;

        var paymentCount = pntCount1 + pntCount2;

        $("#paymentsList").html("List with " + paymentCount + " items");



        var accnts1Ul = $('.accountsfirstUL').find(">li");
        var accntCount1 = accnts1Ul.length;

        var accnts2Ul = $('.accountssecondUL').find(">li");
        var accntCount2 = accnts2Ul.length;
      
       var accnts3Ul = $('.accountsthirdUL').find(">li");
        var accntCount3 = accnts3Ul.length;

        var accountsCount = accntCount1 + accntCount2 + accntCount3;

        $("#accountsList").html("List with " + accountsCount + " items");


    }

$("#rewards").on("mouseleave", function () { 
  if (viewPortWidth >= 1121) {
          
                $('.dropdown').removeClass("cbolui-hidden").removeClass('open');
  }
           
        })
$("#rewards .dropdown-menu").on("focusout", function () {
          
                $('.dropdown').removeClass("cbolui-hidden").removeClass('open');
           
        })

/*$("li.home_link a#spanishDisclaimerLink").click(function(ev){

       setTimeout(function(){
$(".dialogHeader").focus().attr("tabindex",0);
 },10);    
         
ev.preventDefault();
       
});*/

$("li.home_link a#spanishDisclaimerLink").click(function(ev){

       setTimeout(function(){
$(".dialog-closeBtn").focus().attr("tabindex",0);
 },10);    
         
ev.preventDefault();
       
});

 $("li a#spanishDisclaimerLink").click(function(ev){
$("h2.modal-title").focus();

ev.preventDefault();
});









$(".modal-footer.overlayContent a").attr("tabindex",0);
//$("#spanishDisclaimerLink").attr("role","dialog");

$("#spanishDisclaimerModal").keydown(function(event) { 
  if (event.keyCode == 27) { 
    $('#spanishDisclaimerModal').hide();
	 document.getElementById('spanishDisclaimerLink').focus();
  }
});

$("#spanishDisclaimerModal .close").on('click',function(event) { 
 
    $('#spanishDisclaimerModal').hide();
	 document.getElementById('spanishDisclaimerLink').focus();
  
});






    /*Top Nav Application Script */

	//Redesign changes for Mobile
	$(".dropdown-toggle").on('click',function(){
	var width = $(window).width();
   if (width < 1121) {
	var clickedMenu = $(this).parent().attr("id");
	var isExpanded = $("#"+clickedMenu).find(".dropdown-menu:visible").length > 0 || ($("#exploreProductsMobileLinks:visible").length > 0 && clickedMenu=="exploreProductsMobile");
   if (isExpanded) {
	
	$(".mobileIconPostLogin").show();
	if(clickedMenu.indexOf('Subdrop') != -1){
   
	 $("#exploreProductsMobile").show();
	 $("#exploreProductsMobile a:first").show();
	 $("#exploreProductsMobileLinks li").show();
	 $("#"+clickedMenu+".dropdown-menu").hide();
	 $("#exploreProductsMobile a:first span").hide();
	 $(".mobilebackIconPostLogin").show();
	 } else{
	 	$(".mobilebackIconPostLogin").hide();
	 $(".dropdown").show();
	 $("#exploreProductsMobileLinks").hide();
	  $("#atmBranchPostMob").show();
    $("#openAnAccount").show();
    $(".profileMobile").show();
	}
   } else{
  
    $(".dropdown").not($("#" + clickedMenu + ".dropdown")).hide();
	$(".mobilebackIconPostLogin").show();
   if(clickedMenu.indexOf('Subdrop') != -1){
    
	 $("#exploreProductsMobile").show();
	 $("#exploreProductsMobile a:first").hide();
	 $("#"+clickedMenu+".dropdown-menu").show();
	 $("#"+clickedMenu+".dropdown-menu li").show();
	 $(".mobileIconPostLogin").hide();
	 }
   else if(clickedMenu=='exploreProductsMobile'){
  
	  $("#exploreProductsMobileLinks").show();
	  $("#exploreProductsMobileLinks li").show();
	  $("#exploreProductsMobile a:first span").hide();
	 } else{
	 $(".mobileIconPostLogin").hide();
	 }
   $("#atmBranchPostMob").hide();
    $("#openAnAccount").hide();
    if(clickedMenu == 'profileSettingsMobile')
    $(".profileMobile").show();
    else
    	 $(".profileMobile").hide();	
   }
  }
 });

 $(".signOnBtn, #newSearchNav").on('click touchstart', function(){
    if($(".mobileUL #mobile").hasClass("bgcolour")){
    $("#mobileMenu img").toggle();
        $(".mobileUL #mobile").removeClass("bgcolour");
    $("#mobileNav").hide();
  
    }  
 });
var currDomain = window.location.hostname;
if(currDomain.indexOf('online.citi.com') == -1){
 $(".citiFooter a").on('click touchstart', function(){

			var old_url = $(this).attr('href');
			if(old_url.startsWith('/US/')){
				var new_url = externalDomain + old_url;
				$(this).attr("href", new_url);

			}
		});
}

var targetURL;    
$(".speedBump").on("click", function(e){
       
			e.preventDefault();
        	targetURL = $(this).attr('href');
			$('#speedBumpModal').show();
			
		});

$("#overlayContinueBtn").on("click",function(e){
        $('.fade.in').hide();
        $("body").removeClass("modal-open");
		$('#speedBumpModal').hide();
	var win = window.open(targetURL , '_blank');	 
}); 
 

$("li#signOff.signOff").attr("role","presentation");

 /* $("ul.sia-nav_submenu").removeAttr("data-item");
  $("li.mm_subnav").removeAttr("data-item-value");
  $("li.mm_subnav a").removeAttr("data-menu");
  $("ul.sia-nav_submenu").removeAttr("role","menu");
  $("li.mm_subnav").removeAttr("role","menuitem").attr("role","presentation");
 $("li.mm_subnav").removeAttr("aria-haspopup"); */
 $("ul.sia-nav_submenu").removeAttr("role","menu");
  $("li.mm_subnav").removeAttr("role","menuitem").attr("role","presentation");
$("#JDPowerDownload").attr("tabindex",0);
$("a.JDPower_text").attr("tabindex","-1");

//$("#citiBrandingSection a .brandingLogo").attr("tabindex",0);
$("#citiBrandingSection a#headerLoka").attr("tabindex","-1");


//$("#searchLi").attr("role","menuitem");
$(".divider").attr("role","presentation");
//$("#signOnOffLi").attr("role","menuitem");
$("#signOnOffLi ul li").removeAttr("tabindex");

if ($("#customerType").length > 0 && $("#customerType").html() != "") {
  $(".redeisngprofile").css('display','inline-block');
   
$("#profileLinks").css('display','block');
     
     
}else{
   $(".redeisngprofile").css('display','none'); 
    $("#profileLinks").css('display','none'); 
        
     }

 /*sessionParams = sessionStorage['sessionPostBrandingStorage'] || localStorage['sessionPostBrandingStorage'] || null;

 
     if (sessionParams !== null && sessionParams !== "" && sessionParams !== "null") {
       
            sessionParams = JSON.parse(sessionParams)
 $("#profileLinks").css('display','block');
     }
     else{
        $("#profileLinks").css('display','none'); 
        $(".redeisngprofile").css('display','none'); 
     }*/

 $("#AppStoreBadge").on('click',function(){
    $("#speedBumpModal").addClass("in");
    $(".close").on('click',function(){
    $("#speedBumpModal").css("display","none");
    })
})

 if($("#spanishDisclaimerLink,.englishlang").is(':visible')){
 $("#profileLinks").css("display","none");   
   $(".pull-right").addClass("redesty"); 
}
if($("#citilmHeader").hasClass('citiPBAccount')){
$("#citilmHeader.citiPBAccount").find('#citiBrandingSection #browserLogoCPB').css('display','block');
}
if (pageDef==("jUSCBOL_Loginpage_Uncookied"))
{
        
    $("#subnav_inner").css('width','75%');
  $("#searchLi").css("margin-right","35px");
    
}
if (pageDef==("jUSCBOL_Loginpage_Cookied"))
{
        
    $("#subnav_inner").css('width','75%');
    $("#searchLi").css("margin-right","35px");
}
if (pageDef==("jUSCBOL_Loginpage_Citigold"))
{
        
    $("#subnav_inner").css('width','75%');
    $("#searchLi").css("margin-right","35px");
}

$(".citiFooter .level1 .category").on("click touchstart", function(e){
			e.preventDefault();
			var  isExpanded = $(this).parent().hasClass("is-expanded");
			if(isExpanded){
			 $(this).parent().removeClass("is-expanded");
			$(".citiFooter .accordionSubMenu").hide();
			}else{
			$(".citiFooter .accordionSubMenu").hide();
			$(".citiFooter .level1").removeClass("is-expanded")
			 $(this).parent().addClass("is-expanded");
			 $(this).parent().find("div.accordionSubMenu").show();
			}
		});
  
/*$('#cmlink_CitiMODALSIGNONOVLY').on('click', function(){
$( "#sign_onOverlayovly" ).on( "dialogopen", function( event, ui ) {
var myobj = document.getElementById("sign_onOverlayovly");
myobj.remove();} );
 })*/ 

if($(".BBredesign  #citi-topNav-container").not('postloginIA')){
    $(".blue_banner_header .pull-right #profileSettings").css('display','none');

}
/*  
if(applicationID == "JSOSIGNON" && screenID == "229"){
$("#signOnOffLi .pull-right").css("display","none");

$("#signOnOffLi").append("<a href='/US/login.do' class='fuipv2'>Sign On</a>");

$("#signOnOffLi a.fuipv2").css({"float":"right","text-decoration":"none","margin-right":"25px"});
}
*/  
/*ADA Issue fix*/

$("#openAnAccount").removeAttr("aria-expanded");
$("#main-nav > li").hover(function(e) {
    $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $(".hover").removeClass("hover"),
    $("#" + e.currentTarget.id).addClass("hover"),
    $("#" + e.currentTarget.id).addClass("active"),
    $("#" + e.currentTarget.id + " .sia-nav_submenus").css("position", "absolute"),
    $("#" + e.currentTarget.id + " .sia-nav_submenu").css("display", "block"),
    $("#" + e.currentTarget.id + " .sia-nav_submenus").css("display", "block")
});
$("#main-nav > li").mouseleave(function(e){
 $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $(".hover").removeClass("hover");
                             });
$("#main-nav > li").focusin(function(e) {
    $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $("li[class!='active'] .sia-nav_submenus.hidden-xs.hidden-sm").css("display", "none"),
    $(".hover").removeClass("hover"),
    $("#" + e.currentTarget.id).addClass("hover"),
    $("#" + e.currentTarget.id).addClass("active"),
    $("#" + e.currentTarget.id + " .sia-nav_submenus").css("position", "absolute"),
    $("#" + e.currentTarget.id + " .sia-nav_submenu").css("display", "block"),
    $("#" + e.currentTarget.id + " .sia-nav_submenus").css("display", "block")
});

var ids_menu = [];
$("#main-nav > li").each(function() {
    ids_menu.push($(this).attr("id"))
});
var ids_hasdrop = [];
$("#subnav li.has-drop").each(function() {
    ids_hasdrop.push($(this).attr("id"))
});
var ids_dropbtn = [];
function mobileDropdown() {
    event.preventDefault(),
    event.stopPropagation(),
    $("#mobileNav").removeAttr("style").css("display", "none"),
    $("#mobileNav").css("display", "block"),
    document.getElementById("mobileDrop").classList.contains("show") && hideMobileDrop(),
    document.getElementById("mobileDrop").classList.toggle("show"),
    document.getElementById("icon").classList.toggle("expanded"),
    document.getElementById("icon").classList.toggle("collapsed")
}
$("#main-nav > li > a").each(function() {
    ids_dropbtn.push($(this).attr("id"))
}),
window.addEventListener("keydown", function(e) {
    var n = document.activeElement.id
      , s = document.activeElement.parentElement.id;
    if (null != s)
        var a = document.activeElement.getAttribute("data-menu");
    if (-1 == $.inArray(n, ids_dropbtn) && null == a)
        var t = ids_dropbtn.indexOf(s);
    else
        t = -1 == $.inArray(s, ids_dropbtn) && null == a ? ids_dropbtn.indexOf(n) : $.inArray(a, ids_dropbtn);
    var i = event.keyCode || event.which
      , o = ids_menu.indexOf(s);
    if (-1 == t)
        var r = void 0;
    else
        r = ids_menu[t + 1];
    if (t < 1)
        var d = void 0;
    else
        d = ids_menu[t - 1];
    var l = ids_menu[t]
      , c = [];
    $("#subnav #" + ids_hasdrop[t] + " li").each(function() {
        c.push($(this).attr("id"))
    });
    var u = c.indexOf(s)
      , m = ids_menu.length
      , p = c.length;
    if (event.shiftKey && 9 === i && $.inArray(l, ids_menu) > -1 && t > -1)
        console.log("Shift + tab", event.type, i, event.key, l),
        $.inArray(l, ids_menu) > -1 && $.inArray(d, ids_hasdrop) > -1 && t > 0 ? ($(".tabbed").removeClass("tabbed"),
        $("#" + d).addClass("tabbed"),
        $("#" + d + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation()) : $.inArray(l, ids_menu) > -1 && o > 0 && ($(".tabbed").removeClass("tabbed"),
        $("#" + d).addClass("tabbed"),
        $("#" + d + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation());
    else if (9 == i && $.inArray(l, ids_menu) > -1 && t < m - 1 && t > -1)
        console.log("tab", event.type, i, event.key, l),
        $.inArray(l, ids_menu) > -1 && $.inArray(r, ids_hasdrop) > -1 ? ($(".tabbed").removeClass("tabbed"),
        $("#" + r).addClass("tabbed"),
        $("#" + r + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation()) : ($(".tabbed").removeClass("tabbed"),
        $("#" + r).addClass("tabbed"),
        $("#" + r + " a").first().focus(),
        event.preventDefault(),
        event.stopPropagation());
    else if (40 == i && $.inArray(l, ids_menu) > -1 && t < m) {
        console.log("DownArrow", event.type, i, event.key, l);
        var v = document.activeElement.parentElement.parentElement.parentElement.parentElement.id;
        n == ids_dropbtn[o] && $.inArray(s, ids_hasdrop) > -1 ? $("#" + c[0] + " a").focus() : u > -1 && c[u] == s && u < p - 1 ? ($("#" + c[u + 1] + " a").focus(),
        event.preventDefault(),
        event.stopPropagation()) : u == p - 1 && c[u] == s && $.inArray(v, ids_hasdrop) > -1 ? ($("#" + r + " a").first().focus(),
        event.preventDefault(),
        event.stopPropagation()) : -1 == u && t == m - 1 && ($("#" + ids_menu[0] + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation())
    } else
        38 == i && $.inArray(l, ids_menu) > -1 && t < m && (console.log("UpArrow", event.type, i, event.key, l),
        0 == u && c[0] == s && 0 == t ? ($("#" + ids_menu[0] + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation()) : -1 == u && 0 == t ? ($("#" + ids_menu[m - 1] + " a").focus(),
        $("#" + ids_menu[m - 1]).addClass("active"),
        event.preventDefault(),
        event.stopPropagation()) : 0 == u && c[u] == s ? ($("#" + l + " a.dropbtn").focus(),
        event.preventDefault(),
        event.stopPropagation()) : d == ids_hasdrop[t - 1] && t > 0 && $.inArray(l, ids_menu) > -1 && -1 == u ? ($(".sia-nav_submenu").removeAttr("style").css("display", "block"),
        $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
        $(".sia-nav_submenu").css("display", "none"),
        $(".sia-nav_submenus").css("display", "none"),
        $(".sia-nav_submenus").css("position", "absolute"),
        $("a.dropbtn").attr("aria-expanded", !1),
        $(".active").removeClass("active"),
        $("#" + d + " .sia-nav_submenu").css("display", "block"),
        $("#" + d + " .sia-nav_submenus").css("display", "block"),
        $("#" + d + " .sia-nav_submenus").css("position", "absolute"),
        $("#" + d + " a.dropbtn").attr("tabindex", "0"),
        $("#" + d + " a.dropbtn").attr("aria-expanded", !0),
        $("#" + d).addClass("active"),
        $("#" + d + " [id$='Link']").last().focus(),
        $("#" + d).addClass("active"),
        event.preventDefault(),
        event.stopPropagation()) : u > -1 && c[u] == s && ($("#" + c[u - 1] + " a").focus(),
        event.preventDefault(),
        event.stopPropagation()))
}, !0),
$("#main-nav > li a").on("focusin", function(e) {
    var n = document.activeElement.parentElement.id
      , s = document.activeElement.getAttribute("data-menu");
    if ($.inArray(n, ids_menu) > -1)
        var a = ids_menu.indexOf(n);
    else
        a = ids_dropbtn.indexOf(s);
    if (null != e.relatedTarget && -1 == $.inArray(n, ids_menu))
        var t = e.relatedTarget.parentElement.id;
    else
        t = null != e.relatedTarget && $.inArray(n, ids_menu) > -1 ? e.relatedTarget.parentElement.id : null;
    var i = [];
    $("#subnav #" + ids_hasdrop[a] + " li").each(function() {
        i.push($(this).attr("id"))
    });
    var o = i.indexOf(n);
    n == ids_hasdrop[0] && 0 == a && null == t ? ($(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".tabbed").removeClass("tabbed"),
    $(".mm_subnav a").attr("tabindex", "-1"),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[0]).addClass("focus"),
    $("#" + ids_hasdrop[0] + " .sia-nav_submenu").css("display", "block"),
    $("#" + ids_hasdrop[0] + " .sia-nav_submenus").css("display", "block"),
    $("#" + ids_hasdrop[0] + " .sia-nav_submenus").css("position", "absolute"),
    $("#" + ids_hasdrop[0] + " a.dropbtn").attr("aria-expanded", !0),
    $("#" + ids_hasdrop[0]).addClass("active")) : 0 == $("#" + ids_menu[a]).hasClass("tabbed") && $.inArray(t, ids_menu) > -1 && $.inArray(n, ids_menu) > -1 && $.inArray(t, ids_menu) > $.inArray(n, ids_menu) ? (console.log("Going Up focus on", n, $.inArray(n, ids_menu), t, $.inArray(t, ids_menu)),
    $(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("focus"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenu").css("display", "block"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenus").css("display", "block"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenus").css("position", "absolute"),
    $("#" + ids_hasdrop[a] + " a.dropbtn").attr("tabindex", "0"),
    $("#" + ids_hasdrop[a] + " a.dropbtn").attr("aria-expanded", !0),
    $("#" + ids_hasdrop[a]).addClass("active"),
    $("#" + ids_hasdrop[a] + " [id$='Link']").last().focus(),
    $("#" + ids_hasdrop[a]).addClass("active")) : 0 == $("#" + ids_menu[a]).hasClass("tabbed") && 0 == $.inArray(t, i) && 0 == o ? (console.log("Going to menu focus on", n, $.inArray(n, ids_menu), t, $.inArray(t, ids_menu)),
    $(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".mm_subnav a").attr("tabindex", "-1"),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("focus"),
    $("#" + ids_hasdrop[a] + " a.dropbtn").focus()) : 0 == $("#" + ids_menu[a]).hasClass("tabbed") && 0 == $.inArray(t, i) && -1 == o && 0 == $.inArray(n, ids_menu) ? ($(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".tabbed").removeClass("tabbed"),
    $(".mm_subnav").attr("tabindex", "-1"),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("active")) : n == ids_hasdrop[a] && a > -1 ? ($(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".mm_subnav a").attr("tabindex", "-1"),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("focus"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenu").css("display", "block"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenus").css("display", "block"),
    $("#" + ids_hasdrop[a] + " .sia-nav_submenus").css("position", "absolute"),
    $("#" + ids_hasdrop[a] + " a.dropbtn").attr("tabindex", "0"),
    $("#" + ids_hasdrop[a] + " a.dropbtn").attr("aria-expanded", !0),
    $("#" + ids_hasdrop[a]).addClass("active")) : $.inArray(n, ids_menu) > -1 && ($(".sia-nav_submenu").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenus").removeAttr("style").css("display", "block"),
    $(".sia-nav_submenu").css("display", "none"),
    $(".sia-nav_submenus").css("display", "none"),
    $(".sia-nav_submenus").css("position", "absolute"),
    $("a.dropbtn").attr("aria-expanded", !1),
    $(".tabbed").removeClass("tabbed"),
    $(".mm_subnav").attr("tabindex", "-1"),
    $(".focus").removeClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("focus"),
    $("#" + ids_hasdrop[a]).addClass("active")),
    console.log("focus on", n, $.inArray(n, ids_menu), t, $.inArray(t, ids_menu))
});


 var sessionPostBrandingStorageObject = sessionStorage.getItem("sessionPostBrandingStorage");
        if (sessionPostBrandingStorageObject) {
       
            sessionPostBrandingStorageObject = JSON.parse(sessionPostBrandingStorageObject);
            var isCitiAllianceOnly = sessionPostBrandingStorageObject.serviceLinksBean.isCitiAllianceOnly;
          if ($("#customerType").length > 0 && $("#customerType").html() != "") {
            console.log("citialliance bank customer type");
if (isCitiAllianceOnly=="Y" && ($("#customerType").html()=="BANK")){
  console.log("bank customer legacy citialliance");
  $("#exploreProducts .dropdown-menu").addClass('citiallinace');

$("#exploreProductsMobile #exploreProductsMobileLinks").addClass('citiallinace');
  
$("#exploreProducts .dropdown-menu").attr("style","min-width:720px !important");
 
   }
        
        }
        }

$("#openAnAccount").removeAttr("aria-expanded");
$("#housingLogodesk span#homeSpriteLogodesk").removeAttr("role");
  $("#openAnAccount #citiGold_Link").attr("role","menuitem");
  $("#housingLogodesk span#homeSpriteLogodesk").removeAttr("aria-label");
  var sessionPostBrandingStorageObject = sessionStorage.getItem("sessionPostBrandingStorage");
        if (sessionPostBrandingStorageObject) {
       
            sessionPostBrandingStorageObject = JSON.parse(sessionPostBrandingStorageObject);
            var isCostcoEmployeeuser = sessionPostBrandingStorageObject.isCostcoEmployeeUser;
            var isCDOnlyCustomer = sessionPostBrandingStorageObject.isCDOnlyCustomer;
          	var isBrokerageOnly = sessionPostBrandingStorageObject.serviceLinksBean.isBrokerageOnly;
			var custSegmentType = sessionPostBrandingStorageObject.custSegmentType;
          		setTimeout(function(){
                 var onlycz4transfers=sessionPostBrandingStorageObject.custSegmentType;
              if(onlycz4transfers=="onlyCZ4"){
                 $(".dropdown-toggle.hasczonly").css("display","show");
                     $(".rightSection.pntSecondUL .hasczonly").css("display","none");
                  				$(".dropdown-toggle.hascznone").css('display','none');
                                //$(".leftSection.pntfirstUL").css('display','none');
                                $(".rightSection.pntSecondUL").css('float','left');
                                $(".dropdown-menu").css('min-width','300px');
                      $(".leftSection.pntfirstUL .pntTitle").css('display','none');
                 $(".rightSection.pntSecondUL .pntTitle").css('display','none');
                              }else{
                                $(".dropdown-toggle.hascznone").css('display','show');
                                $(".dropdown-toggle.hasczonly").css("display","none");
                                $(".leftSection.pntfirstUL").css('display','show');
                                $(".rightSection.pntSecondUL").css('float','right');
                                 $(".rightSection.pntSecondUL .pntTitle").css('display','show');
                              }
              
         
                     },2000);
       /*     if(custSegmentType=="hasCZ4"){
               setTimeout(function(){
               if((lang == "en_US_USGCB")==true) {             
					if($("#services li a").html() == "Banking Services")
					{
    					var text1 = $("#services .dropdown-menu li:first a").html();
						var text2=text1.replace('Banking Services','Banking & Investment Services');
    					$("#services .dropdown-menu li:first a").text(text2);
        			}
       			 }
                 else if((lang == "es_US_USGCB")==true) {             
				if($("#services li a").html() == "Servicios Bancarios")
				{
    					var text1 = $("#services .dropdown-menu li:first a").html();
						var text2=text1.replace('Servicios Bancarios','Servicios Bancarios y de Inversin');
   						$("#services .dropdown-menu li:first a").text(text2);
        		}
        		}
                },3000);
                        
                } */

if (isCostcoEmployeeuser=="Y"  || isCDOnlyCustomer=="Y" ){
       
$("#paymentsandTransfers").css('display','none');
$("#citi-topNav-container.cbolui-ddl-topNav.citi-topNav .exploreProducts .dropdown-menu").css("left","-164px !important");
}
  if(isBrokerageOnly=='Y'){
                        $("#rewards").css('display','none');
                }
          

        }
  if(applicationID == "JSOSIGNON" && screenID == "229"){
$("#signOnOffLi .pull-right").css("display","none");

$("#signOnOffLi").append("<a href='/US/login.do' class='fuipv2'>Sign On</a>");

$("#signOnOffLi a.fuipv2").css({"float":"right","text-decoration":"none","margin-right":"25px"});
}
   

}, 1000)
