var isConversationTopic=false;var conversationTopicArray=["ActivationComplete","AddUserSuccess","AO_AutoPayComplete","AO_BillPayPymtMade","AO_RegistrationSuccess","AppStarted","AppSubmitted","ATMAccess","BPMakePymtSuccess","CBOL_DepositsAppCompleted","CBOL_IsBillPayEnrolled","CBOL_PwdIDResetSuccess","CBOL_SecureMsgSent","DeleteUserSuccess","EditUserSuccess","GrantOnlineAccess","RegistrationComplete","RemoveOnlineAccess","SetupUserSuccess","SpendLimitGranted","TNSuccess","UpdateIncomeSuccess","AO_BTSubmit","Originations_Lead_Finish","Originations_Lead_Start","QuoteAuthDecline","ATP_Fail"];function addChatVariables(j,h){var f=getChatObjName();if(null!=f){var c=window[f];if(typeof c!="undefined"){var g=getChatLPVersion();if(null!=g&&g=="LP"){c.vars.push(j,h)}else{if(null!=g&&g=="LE"){if(typeof j!=undefined&&null!=j){if("DVASessionActive"==j){var e=c.section;if(typeof e!=undefined&&e instanceof Array){var b=e.length;if(b>4){e.splice(4,b-4,h)}else{if(b==4){c.section.push(h)}}}}if(isConversationTopic){for(var d=0;d<conversationTopicArray.length;d++){if(conversationTopicArray[d]==j){pushServiceAttribute("service",j,h);break}}}else{var a=populateConvVarObjArray(conversationTopicArray,"service",j,h);if(isConversationTopic){c.sdes.push(a)}else{}}}else{}}}}}}function getChatObjName(){return((typeof chatObjName!="undefined")?chatObjName:null)}function getChatLPVersion(){return((typeof lpVersion!="undefined")?lpVersion:null)}function createConversationVariable(b,a,d){var c={};var e={};e.topic=b;e.status=a;c.type=d;c.service=e;return c}function populateConvVarObjArray(e,c,b,d){var f=[];for(var a=0;a<e.length;a++){if(e[a]==b){isConversationTopic=true;f.push(createConversationVariable(e[a],d,c))}else{f.push(createConversationVariable(e[a],null,c))}}return f}function pushServiceAttribute(f,e,g){var b=false;if(typeof lpTag!="undefined"&&typeof lpTag.sdes!="undefined"){for(var d=0;d<lpTag.sdes.get("service").length;d++){var c=lpTag.sdes.get("service")[d].service.topic;var a=lpTag.sdes.get("service")[d].service.status;if(null!=a){lpTag.sdes.get("service").splice(d,1,createConversationVariable(c,null,f))}if(c==e){b=true;lpTag.sdes.get("service").splice(d,1,createConversationVariable(e,g,f))}}if(!b){lpTag.sdes.push(createConversationVariable(e,g,f))}}}function getLPChatObj(){var a=getChatObjName();var b=null;if(null!=a){b=window[a]}return b}function addChatScopeVars(c,b,d){if(null!=c&&null!=b&&null!=d){var a=[];a.push(c,b,d);var e=getLPChatObj();if(null!=e){e.sdes.push(a)}}}function pushLEVars(){if(typeof lpTag!="undefined"&&typeof lpTag.sdes!="undefined"){if(typeof LPCustomerInfo!="undefined"){lpTag.sdes.push(LPCustomerInfo)}if(typeof LPPersonalInfo!="undefined"){lpTag.sdes.push(LPPersonalInfo)}if(typeof LPMarketingSource!="undefined"){lpTag.sdes.push(LPMarketingSource)}if(typeof LPLead!="undefined"){lpTag.sdes.push(LPLead)}if(typeof LPCart!="undefined"){lpTag.sdes.push(LPCart)}if(typeof LPProductView!="undefined"){lpTag.sdes.push(LPProductView)}if(typeof LPOrder!="undefined"){lpTag.sdes.push(LPOrder)}if(typeof LPErrorArray!="undefined"){for(var a=0;a<LPErrorArray.length;a++){lpTag.sdes.push(LPErrorArray[a])}}if(typeof LPServiceActivity!="undefined"){lpTag.sdes.push(LPServiceActivity)}}}var getContextPath=function(){var c="";var a=document.URL;a=a.split("/");for(var b=3;b<(a.length-1);b++){a[b];c+="../"}a=a[3];return[a,c]};function injectChatDiv(b){if(null!=b){var a=document.getElementById(b);if(null==a){var c=document.createElement("div");c.setAttribute("id",b);document.body.appendChild(c)}else{}}}function pushLEVarsAjax(){var a={};if(typeof type!="undefined"){a=createServiceVariable(type);var b=document.URL;if(typeof lpTag!="undefined"&&typeof lpTag.newPage!="undefined"&&typeof lpTag.section!="undefined"){lpTag.newPage(b,{section:lpTag.section,sdes:[a],taglets:{rendererStub:{divIdsToKeep:{lpButtonDiv:true,lpButtonNeedHelp:true}},}})}}if(typeof lpTag!="undefined"&&typeof lpTag.sdes!="undefined"&&typeof lpTag.sdes.send!="undefined"){lpTag.sdes.send()}}function createServiceVariable(b){var a={};var c={};a.type="";if(null!=b){a.type=b}if(typeof topic!="undefined"){c.topic=topic}if(typeof status!="undefined"){c.status=status}if(typeof category!="undefined"){c.category=category}if(typeof serviceId!="undefined"){c.serviceId=serviceId}a.service=c;return a}function populateSection(){var a=[];if(typeof live_engage_section_array!="undefined"){a=live_engage_section_array;if(typeof lpTag!="undefined"){lpTag.section=a}}}function LPGetAuthenticationToken(e){var c=getContextPath();var b=c[0];var d="/"+b+"/REST/chatResource/fetchToken.jws";var a="Error";if(typeof jQuery!="undefined"){jQuery.ajax({url:d,type:"POST",async:false,contentType:"text/plain",dataType:"text",beforeSend:function(f){f.setRequestHeader("Content-Type","text/plain")},success:function(g,h,f){if(null!=g){a=g}},error:function(f,h,g){a="Error"}})}e(a)};
